{"version":3,"sources":["webpack:///./src/app/views/login/confirmation/confirmation.component.html","webpack:///./src/app/views/login/confirmation/confirmation.component.ts","webpack:///./src/app/views/login/forgot/forgot.component.html","webpack:///./src/app/views/login/forgot/forgot.component.ts","webpack:///./src/app/views/login/login.module.ts","webpack:///./src/app/views/login/login.routing.ts","webpack:///./src/app/views/login/login.service.ts","webpack:///./src/app/views/login/login/login.component.html","webpack:///./src/app/views/login/login/login.component.ts","webpack:///./src/app/views/login/register/register.component.html","webpack:///./src/app/views/login/register/register.component.ts"],"names":[],"mappings":"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","file":"views-login-login-module.js","sourcesContent":["module.exports = \"<ab-panel *ngIf=\\\"schemas\\\"\\n          [schema]=\\\"schemas\\\">\\n  <panel-body>\\n    <ab-form [formSchema]=\\\"schemas.form\\\"\\n             (send)=\\\"onSend($event)\\\">\\n    </ab-form>\\n  </panel-body>\\n</ab-panel>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { IWidgetSchema, IFormSchema } from 'app/tools/schema.model';\nimport { ActivatedRoute } from '@angular/router';\nimport { SchemaService } from 'app/tools/components/schema.service';\nimport { SecurityService, IInvitationCredential } from 'app/tools/security.service';\nimport { BusService } from 'app/tools/bus.service';\nimport { Level } from 'app/tools/message.model';\nimport { LoginService } from 'app/views/login/login.service';\n\n@Component({\n  selector: 'ab-confirmation',\n  templateUrl: './confirmation.component.html',\n  styles: []\n})\nexport class ConfirmationComponent implements OnInit {\n\n  public schemas;\n  public userId: string;\n  public user;\n\n  constructor(\n    private route: ActivatedRoute,\n    private login: LoginService,\n    private bus: BusService,\n    private schema: SchemaService,\n    private securityService: SecurityService) { }\n\n  ngOnInit() {\n    this.route.params\n      .subscribe(params => {\n        this.userId = params['user_id'];\n        this.login.getUserById(this.userId).subscribe(user => {\n          this.schema\n            .getSchema$('me_confirmation')\n            .subscribe(schemas => {\n              this.schemas = schemas\n              this.user = user;\n              this.schemas.header.title = `Hola ${this.user.name}! ` + this.schemas.header.title;\n            });\n        });\n      });\n  }\n\n  onSend(credentials: IInvitationCredential) {\n    if (credentials.password === credentials.passwordBis) {\n      credentials._id = this.userId;\n      this.securityService.confirmInvitation(credentials);\n    } else {\n      this.bus.emit({ level: Level.WARNING, code: 'passwordbis' });\n    }\n  }\n\n}\n","module.exports = \"<ab-panel *ngIf=\\\"schemas\\\"\\n          [schema]=\\\"schemas\\\">\\n  <panel-body>\\n    <ab-form [formSchema]=\\\"schemas.form\\\"\\n             (send)=\\\"onSend($event)\\\">\\n    </ab-form>\\n  </panel-body>\\n</ab-panel>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { SchemaService } from 'app/tools/components/schema.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { LoginService } from 'app/views/login/login.service';\nimport { BusService } from 'app/tools/bus.service';\nimport { Level } from 'app/tools/message.model';\n\n@Component({\n  selector: 'ab-forgot',\n  templateUrl: './forgot.component.html',\n  styles: []\n})\nexport class ForgotComponent implements OnInit {\n  public schemas;\n  private userId;\n\n  constructor(\n    private router: Router,\n    private bus: BusService,\n    private loginService: LoginService,\n    private schema: SchemaService) { }\n\n  ngOnInit() {\n    this.schema\n      .getSchema$('forgot_password')\n      .subscribe(schemas => this.schemas = schemas);\n  }\n\n  onSend(email) {\n    this.loginService.restorePassword(email).subscribe(() => {\n      this.bus.emit({ level: Level.SUCCESS, text: 'Recibirás un correo cos pasos necesarios para cambiar o teu contrasinal', code: '' });\n    });\n    this.router.navigateByUrl('/');\n  }\n}\n","import { NgModule, NO_ERRORS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoginRoutingModule } from './login.routing';\nimport { LoginComponent } from './login/login.component';\nimport { ComponentsModule } from 'app/tools/components/components.module';\nimport { RegisterComponent } from './register/register.component';\nimport { ForgotComponent } from './forgot/forgot.component';\nimport { ConfirmationComponent } from 'app/views/login/confirmation/confirmation.component';\nimport { LoginService } from 'app/views/login/login.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    LoginRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [LoginComponent, ConfirmationComponent, RegisterComponent, ForgotComponent],\n  providers: [LoginService],\n  schemas: [NO_ERRORS_SCHEMA]\n})\nexport class LoginModule { }\n","import { NgModule, Injectable } from '@angular/core';\nimport { Routes, RouterModule, Resolve, Router, ActivatedRoute } from '@angular/router';\nimport { LoginComponent } from 'app/views/login/login/login.component';\nimport { RegisterComponent } from 'app/views/login/register/register.component';\nimport { ForgotComponent } from 'app/views/login/forgot/forgot.component';\nimport { ConfirmationComponent } from 'app/views/login/confirmation/confirmation.component';\n\n\nconst routes: Routes = [{\n  path: '',\n  component: LoginComponent,\n  data: { name: 'login', title: 'Entrada' }\n},\n{\n  path: 'confirm/:user_id',\n  component: ConfirmationComponent,\n  data: { name: 'me_confirmation', title: 'Confirmación de conta' }\n},\n{\n  path: 'forgot-password',\n  component: ForgotComponent,\n  data: { name: 'forgot', title: 'Recuperar contrasinal' }\n},\n{\n  path: 'register',\n  component: RegisterComponent,\n  data: { name: 'register', title: 'Rexistro' }\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginRoutingModule { }\n\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable()\nexport class LoginService {\n\n  private credentialsUrl = 'credentials';\n  private usersUrl = 'home/users';\n\n  constructor(private http: HttpClient) { }\n\n  getUserById(userId) {\n    return this.http.get(`${this.usersUrl}/${userId}`);\n  }\n\n  restorePassword(email) {\n    return this.http.post(`${this.credentialsUrl}/forgot-password`, email);\n  }\n\n}\n","module.exports = \"<ab-panel *ngIf=\\\"schemas\\\"\\n          [schema]=\\\"schemas\\\">\\n  <panel-body>\\n    <ab-form [formSchema]=\\\"schemas.form\\\"\\n             (send)=\\\"onSend($event)\\\">\\n    </ab-form>\\n  </panel-body>\\n</ab-panel>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { IFormSchema, IWidgetSchema } from 'app/tools/schema.model';\nimport { SecurityService, IUserCredential } from 'app/tools/security.service';\nimport { environment } from './../../../../environments/environment';\nimport { SchemaService } from 'app/tools/components/schema.service';\nimport { Observable } from 'rxjs';\nimport { ActivatedRoute } from '@angular/router';\n@Component({\n  selector: 'ab-login',\n  templateUrl: './login.component.html',\n  styles: []\n})\nexport class LoginComponent implements OnInit {\n  public schemas;\n\n  constructor(\n    private security: SecurityService,\n    private schema: SchemaService,\n    private activatedRoute: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.schema\n      .getSchema$('login')\n      .subscribe(schemas => this.schemas = schemas);\n  }\n\n  onSend(credentials: IUserCredential) {\n    this.security\n      .logInUser(credentials);\n  }\n\n}\n\n\n","module.exports = \"<ab-panel *ngIf=\\\"schemas\\\"\\n          [schema]=\\\"schemas\\\">\\n  <panel-body>\\n    <ab-form [formSchema]=\\\"schemas.form\\\"\\n             (send)=\\\"onSend($event)\\\">\\n    </ab-form>\\n  </panel-body>\\n</ab-panel>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { SecurityService } from 'app/tools/security.service';\nimport { BusService } from 'app/tools/bus.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { IFormSchema } from 'app/tools/schema.model';\nimport { SchemaService } from 'app/tools/components/schema.service';\nimport { IUser } from 'app/tools/user.model';\n\n@Component({\n  selector: 'ab-register',\n  templateUrl: './register.component.html',\n  styles: []\n})\nexport class RegisterComponent implements OnInit {\n\n  public schemas;\n  public user;\n\n  constructor(\n    private security: SecurityService,\n    private bus: BusService,\n    private schema: SchemaService,\n    private activatedRoute: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.schema\n      .getSchema$('register')\n      .subscribe(schemas => this.schemas = schemas);\n  }\n\n  onSend(credentials) {\n    this.security\n      .logInUser(credentials);\n  }\n\n}\n"],"sourceRoot":""}