{"version":3,"sources":["webpack:///./node_modules/image-compressor.js/dist/image-compressor.esm.js","webpack:///./src/app/views/me/booking/booking.component.css","webpack:///./src/app/views/me/booking/booking.component.html","webpack:///./src/app/views/me/booking/booking.component.ts","webpack:///./src/app/views/me/bookings/bookings.component.html","webpack:///./src/app/views/me/bookings/bookings.component.ts","webpack:///./src/app/views/me/event-bookings/event-bookings.component.html","webpack:///./src/app/views/me/event-bookings/event-bookings.component.ts","webpack:///./src/app/views/me/event-print/event-print.component.css","webpack:///./src/app/views/me/event-print/event-print.component.html","webpack:///./src/app/views/me/event-print/event-print.component.ts","webpack:///./src/app/views/me/event/event.component.css","webpack:///./src/app/views/me/event/event.component.html","webpack:///./src/app/views/me/event/event.component.ts","webpack:///./src/app/views/me/events-ushier/events-ushier.component.css","webpack:///./src/app/views/me/events-ushier/events-ushier.component.html","webpack:///./src/app/views/me/events-ushier/events-ushier.component.ts","webpack:///./src/app/views/me/events/events.component.css","webpack:///./src/app/views/me/events/events.component.html","webpack:///./src/app/views/me/events/events.component.ts","webpack:///./src/app/views/me/me.module.ts","webpack:///./src/app/views/me/me.routing.ts","webpack:///./src/app/views/me/me/me.component.html","webpack:///./src/app/views/me/me/me.component.ts","webpack:///./src/app/views/me/organization/organization.component.css","webpack:///./src/app/views/me/organization/organization.component.html","webpack:///./src/app/views/me/organization/organization.component.ts","webpack:///./src/app/views/me/organizations/organizations.component.css","webpack:///./src/app/views/me/organizations/organizations.component.html","webpack:///./src/app/views/me/organizations/organizations.component.ts","webpack:///./src/app/views/me/users/users.component.css","webpack:///./src/app/views/me/users/users.component.html","webpack:///./src/app/views/me/users/users.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,YAAY,EAAE;AAChC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sCAAsC,gBAAgB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,MAAM,KAAgD,EAAE,EAIrD;AACH;AACA,GAAG;AACH;AACA;AACA,CAAC;AACD,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,8FAA8F;AAC9G,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,6DAA6D;AAC7E,YAAY;AACZ;AACA;;AAEA;AACA;AACA,YAAY;AACZ,aAAa,yBAAyB;AACtC,aAAa,kBAAkB;AAC/B;AACA,iCAAiC;AACjC;AACA;;AAEA;AACA;AACA,YAAY;AACZ,aAAa,yBAAyB;AACtC,aAAa,kBAAkB;AAC/B;AACA,iCAAiC;AACjC;AACA;;AAEA;AACA;AACA,YAAY;AACZ,aAAa,KAAK;AAClB;AACA,sBAAsB;AACtB;AACA;;AAEA;AACA;AACA,YAAY;AACZ,aAAa,MAAM;AACnB;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;;AAEA;AACA;AACA;;AAEA;;AAEA,iBAAiB,YAAY;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;;AAGA,mBAAmB,YAAY;AAC/B;AACA;AACA;;AAEA,gCAAgC;AAChC;;AAEA;AACA;AACA,WAAW,YAAY;AACvB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,aAAa;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,GAAG;;AAEvC;AACA;AACA,cAAc;AACd,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA,2BAA2B;;AAE3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,sCAAsC;AACtC;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW;AACX;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;;AAEc,8EAAe,EAAC;;;;;;;;;;;;AChyB/B,iCAAiC,oBAAoB,0BAA0B,8BAA8B,yBAAyB,KAAK,cAAc,qBAAqB,KAAK,eAAe,wBAAwB,KAAK,uBAAuB,uBAAuB,KAAK,iBAAiB,oBAAoB,KAAK,+CAA+C,20B;;;;;;;;;;;ACA3W,8PAA8P,kHAAkH,eAAe,gOAAgO,sBAAsB,kzCAAkzC,wBAAwB,kKAAkK,2BAA2B,6wC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA1kE;AACE;AACgB;AACnB;AACE;AACH;AAOhD;IASE,0BACU,GAAe,EACf,KAAqB,EACrB,EAAa,EACb,aAA4B;QAH5B,QAAG,GAAH,GAAG,CAAY;QACf,UAAK,GAAL,KAAK,CAAgB;QACrB,OAA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","file":"views-me-me-module.js","sourcesContent":["/*!\n * Image Compressor v1.1.4\n * https://xkeshi.github.io/image-compressor\n *\n * Copyright 2017-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2018-06-20T07:28:41.051Z\n */\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar canvasToBlob = createCommonjsModule(function (module) {\n(function (window) {\n\n  var CanvasPrototype =\n    window.HTMLCanvasElement && window.HTMLCanvasElement.prototype;\n  var hasBlobConstructor =\n    window.Blob &&\n    (function () {\n      try {\n        return Boolean(new Blob())\n      } catch (e) {\n        return false\n      }\n    })();\n  var hasArrayBufferViewSupport =\n    hasBlobConstructor &&\n    window.Uint8Array &&\n    (function () {\n      try {\n        return new Blob([new Uint8Array(100)]).size === 100\n      } catch (e) {\n        return false\n      }\n    })();\n  var BlobBuilder =\n    window.BlobBuilder ||\n    window.WebKitBlobBuilder ||\n    window.MozBlobBuilder ||\n    window.MSBlobBuilder;\n  var dataURIPattern = /^data:((.*?)(;charset=.*?)?)(;base64)?,/;\n  var dataURLtoBlob =\n    (hasBlobConstructor || BlobBuilder) &&\n    window.atob &&\n    window.ArrayBuffer &&\n    window.Uint8Array &&\n    function (dataURI) {\n      var matches,\n        mediaType,\n        isBase64,\n        dataString,\n        byteString,\n        arrayBuffer,\n        intArray,\n        i,\n        bb;\n      // Parse the dataURI components as per RFC 2397\n      matches = dataURI.match(dataURIPattern);\n      if (!matches) {\n        throw new Error('invalid data URI')\n      }\n      // Default to text/plain;charset=US-ASCII\n      mediaType = matches[2]\n        ? matches[1]\n        : 'text/plain' + (matches[3] || ';charset=US-ASCII');\n      isBase64 = !!matches[4];\n      dataString = dataURI.slice(matches[0].length);\n      if (isBase64) {\n        // Convert base64 to raw binary data held in a string:\n        byteString = atob(dataString);\n      } else {\n        // Convert base64/URLEncoded data component to raw binary:\n        byteString = decodeURIComponent(dataString);\n      }\n      // Write the bytes of the string to an ArrayBuffer:\n      arrayBuffer = new ArrayBuffer(byteString.length);\n      intArray = new Uint8Array(arrayBuffer);\n      for (i = 0; i < byteString.length; i += 1) {\n        intArray[i] = byteString.charCodeAt(i);\n      }\n      // Write the ArrayBuffer (or ArrayBufferView) to a blob:\n      if (hasBlobConstructor) {\n        return new Blob([hasArrayBufferViewSupport ? intArray : arrayBuffer], {\n          type: mediaType\n        })\n      }\n      bb = new BlobBuilder();\n      bb.append(arrayBuffer);\n      return bb.getBlob(mediaType)\n    };\n  if (window.HTMLCanvasElement && !CanvasPrototype.toBlob) {\n    if (CanvasPrototype.mozGetAsFile) {\n      CanvasPrototype.toBlob = function (callback, type, quality) {\n        var self = this;\n        setTimeout(function () {\n          if (quality && CanvasPrototype.toDataURL && dataURLtoBlob) {\n            callback(dataURLtoBlob(self.toDataURL(type, quality)));\n          } else {\n            callback(self.mozGetAsFile('blob', type));\n          }\n        });\n      };\n    } else if (CanvasPrototype.toDataURL && dataURLtoBlob) {\n      CanvasPrototype.toBlob = function (callback, type, quality) {\n        var self = this;\n        setTimeout(function () {\n          callback(dataURLtoBlob(self.toDataURL(type, quality)));\n        });\n      };\n    }\n  }\n  if (typeof undefined === 'function' && undefined.amd) {\n    undefined(function () {\n      return dataURLtoBlob\n    });\n  } else if (module.exports) {\n    module.exports = dataURLtoBlob;\n  } else {\n    window.dataURLtoBlob = dataURLtoBlob;\n  }\n})(window);\n});\n\n/* globals Blob */\nvar toString = Object.prototype.toString;\n\nvar isBlob = function (x) {\n\treturn x instanceof Blob || toString.call(x) === '[object Blob]';\n};\n\nvar DEFAULTS = {\n  /**\n   * Indicates if read the image's Exif Orientation information,\n   * and then rotate or flip the image automatically.\n   * @type {boolean}\n   */\n  checkOrientation: true,\n\n  /**\n   * The max width of the output image.\n   * @type {number}\n   */\n  maxWidth: Infinity,\n\n  /**\n   * The max height of the output image.\n   * @type {number}\n   */\n  maxHeight: Infinity,\n\n  /**\n   * The min width of the output image.\n   * @type {number}\n   */\n  minWidth: 0,\n\n  /**\n   * The min height of the output image.\n   * @type {number}\n   */\n  minHeight: 0,\n\n  /**\n   * The width of the output image.\n   * If not specified, the natural width of the source image will be used.\n   * @type {number}\n   */\n  width: undefined,\n\n  /**\n   * The height of the output image.\n   * If not specified, the natural height of the source image will be used.\n   * @type {number}\n   */\n  height: undefined,\n\n  /**\n   * The quality of the output image.\n   * It must be a number between `0` and `1`,\n   * and only available for `image/jpeg` and `image/webp` images.\n   * Check out {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob canvas.toBlob}.\n   * @type {number}\n   */\n  quality: 0.8,\n\n  /**\n   * The mime type of the output image.\n   * By default, the original mime type of the source image file will be used.\n   * @type {string}\n   */\n  mimeType: 'auto',\n\n  /**\n   * PNG files over this value (5M by default) will be converted to JPEGs.\n   * To disable this, just set the value to `Infinity`.\n   * Check out {@link https://github.com/xkeshi/image-compressor/issues/2 #2}.\n   * @type {number}\n   */\n  convertSize: 5000000,\n\n  /**\n   * The hook function to execute before draw the image into the canvas for compression.\n   * @type {Function}\n   * @param {CanvasRenderingContext2D} context - The 2d rendering context of the canvas.\n   * @param {HTMLCanvasElement} canvas - The canvas for compression.\n   * @example\n   * function (context, canvas) { context.fillStyle = '#fff' }\n   */\n  beforeDraw: null,\n\n  /**\n   * The hook function to execute after drew the image into the canvas for compression.\n   * @type {Function}\n   * @param {CanvasRenderingContext2D} context - The 2d rendering context of the canvas.\n   * @param {HTMLCanvasElement} canvas - The canvas for compression.\n   * @example\n   * function (context, canvas) { context.filter = grayscale(100%) }\n   */\n  drew: null,\n\n  /**\n   * The hook function to execute when success to compress the image.\n   * @type {Function}\n   * @param {File} file - The compressed image File object.\n   * @example\n   * function (file) { console.log(file) }\n   */\n  success: null,\n\n  /**\n   * The hook function to execute when fail to compress the image.\n   * @type {Function}\n   * @param {Error} err - An Error object.\n   * @example\n   * function (err) { console.log(err.message) }\n   */\n  error: null\n};\n\nvar REGEXP_IMAGE_TYPE = /^image\\/.+$/;\n\n/**\n * Check if the given value is a mime type of image.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given is a mime type of image, else `false`.\n */\nfunction isImageType(value) {\n  return REGEXP_IMAGE_TYPE.test(value);\n}\n\n/**\n * Convert image type to extension.\n * @param {string} value - The image type to convert.\n * @param {boolean} [includeDot=true] - Include a leading dot or not.\n * @returns {boolean} Returns the image extension.\n */\nfunction imageTypeToExtension(value) {\n  var includeDot = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  var extension = isImageType(value) ? value.substr(6) : '';\n\n  if (extension === 'jpeg') {\n    extension = 'jpg';\n  }\n\n  if (extension && includeDot) {\n    extension = '.' + extension;\n  }\n\n  return extension;\n}\n\nvar fromCharCode = String.fromCharCode;\n\n/**\n * Get string from char code in data view.\n * @param {DataView} dataView - The data view for read.\n * @param {number} start - The start index.\n * @param {number} length - The read length.\n * @returns {string} The read result.\n */\n\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  var i = void 0;\n\n  length += start;\n\n  for (i = start; i < length; i += 1) {\n    str += fromCharCode(dataView.getUint8(i));\n  }\n\n  return str;\n}\n\nvar _window = window,\n    btoa = _window.btoa;\n\n/**\n * Transform array buffer to Data URL.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n * @param {string} mimeType - The mime type of the Data URL.\n * @returns {string} The result Data URL.\n */\n\nfunction arrayBufferToDataURL(arrayBuffer, mimeType) {\n  var uint8 = new Uint8Array(arrayBuffer);\n  var data = '';\n\n  // TypedArray.prototype.forEach is not supported in some browsers as IE.\n  if (typeof uint8.forEach === 'function') {\n    uint8.forEach(function (value) {\n      data += fromCharCode(value);\n    });\n  } else {\n    var length = uint8.length;\n\n\n    for (var i = 0; i < length; i += 1) {\n      data += fromCharCode(uint8[i]);\n    }\n  }\n\n  return 'data:' + mimeType + ';base64,' + btoa(data);\n}\n\n/**\n * Get orientation value from given array buffer.\n * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n * @returns {number} The read orientation value.\n */\nfunction getOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var orientation = void 0;\n  var littleEndian = void 0;\n  var app1Start = void 0;\n  var ifdStart = void 0;\n\n  // Only handle JPEG image (start by 0xFFD8)\n  if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n    var length = dataView.byteLength;\n    var offset = 2;\n\n    while (offset < length) {\n      if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n        app1Start = offset;\n        break;\n      }\n\n      offset += 1;\n    }\n  }\n\n  if (app1Start) {\n    var exifIDCode = app1Start + 4;\n    var tiffOffset = app1Start + 10;\n\n    if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n      var endianness = dataView.getUint16(tiffOffset);\n\n      littleEndian = endianness === 0x4949;\n\n      if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n          if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n            var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n            if (firstIFDOffset >= 0x00000008) {\n              ifdStart = tiffOffset + firstIFDOffset;\n            }\n          }\n        }\n    }\n  }\n\n  if (ifdStart) {\n    var _length = dataView.getUint16(ifdStart, littleEndian);\n    var _offset = void 0;\n    var i = void 0;\n\n    for (i = 0; i < _length; i += 1) {\n      _offset = ifdStart + i * 12 + 2;\n\n      if (dataView.getUint16(_offset, littleEndian) === 0x0112 /* Orientation */) {\n          // 8 is the offset of the current tag's value\n          _offset += 8;\n\n          // Get the original orientation value\n          orientation = dataView.getUint16(_offset, littleEndian);\n\n          // Override the orientation with its default value\n          dataView.setUint16(_offset, 1, littleEndian);\n          break;\n        }\n    }\n  }\n\n  return orientation;\n}\n\n/**\n * Parse Exif Orientation value.\n * @param {number} orientation - The orientation to parse.\n * @returns {Object} The parsed result.\n */\nfunction parseOrientation(orientation) {\n  var rotate = 0;\n  var scaleX = 1;\n  var scaleY = 1;\n\n  switch (orientation) {\n    // Flip horizontal\n    case 2:\n      scaleX = -1;\n      break;\n\n    // Rotate left 180\n    case 3:\n      rotate = -180;\n      break;\n\n    // Flip vertical\n    case 4:\n      scaleY = -1;\n      break;\n\n    // Flip vertical and rotate right 90\n    case 5:\n      rotate = 90;\n      scaleY = -1;\n      break;\n\n    // Rotate right 90\n    case 6:\n      rotate = 90;\n      break;\n\n    // Flip horizontal and rotate right 90\n    case 7:\n      rotate = 90;\n      scaleX = -1;\n      break;\n\n    // Rotate left 90\n    case 8:\n      rotate = -90;\n      break;\n\n    default:\n  }\n\n  return {\n    rotate: rotate,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n\nvar REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/i;\n\n/**\n * Normalize decimal number.\n * Check out {@link http://0.30000000000000004.com/}\n * @param {number} value - The value to normalize.\n * @param {number} [times=100000000000] - The times for normalizing.\n * @returns {number} Returns the normalized number.\n */\nfunction normalizeDecimalNumber(value) {\n  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n\n  return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _window$1 = window,\n    ArrayBuffer$1 = _window$1.ArrayBuffer,\n    FileReader = _window$1.FileReader;\n\nvar URL = window.URL || window.webkitURL;\nvar REGEXP_EXTENSION = /\\.\\w+$/;\n\n/**\n * Creates a new image compressor.\n * @class\n */\n\nvar ImageCompressor = function () {\n  /**\n   * The constructor of ImageCompressor.\n   * @param {File|Blob} file - The target image file for compressing.\n   * @param {Object} [options] - The options for compressing.\n   */\n  function ImageCompressor(file, options) {\n    classCallCheck(this, ImageCompressor);\n\n    this.result = null;\n\n    if (file) {\n      this.compress(file, options);\n    }\n  }\n\n  /**\n   * The main compress method.\n   * @param {File|Blob} file - The target image file for compressing.\n   * @param {Object} [options] - The options for compressing.\n   * @returns {Promise} - A Promise instance.\n   */\n\n\n  createClass(ImageCompressor, [{\n    key: 'compress',\n    value: function compress(file, options) {\n      var _this = this;\n\n      var image = new Image();\n\n      options = _extends({}, DEFAULTS, options);\n\n      if (!ArrayBuffer$1) {\n        options.checkOrientation = false;\n      }\n\n      return new Promise(function (resolve, reject) {\n        if (!isBlob(file)) {\n          reject(new Error('The first argument must be a File or Blob object.'));\n          return;\n        }\n\n        var mimeType = file.type;\n\n        if (!isImageType(mimeType)) {\n          reject(new Error('The first argument must be an image File or Blob object.'));\n          return;\n        }\n\n        if (!URL && !FileReader) {\n          reject(new Error('The current browser does not support image compression.'));\n          return;\n        }\n\n        if (URL && !options.checkOrientation) {\n          resolve({\n            url: URL.createObjectURL(file)\n          });\n        } else if (FileReader) {\n          var reader = new FileReader();\n          var checkOrientation = options.checkOrientation && mimeType === 'image/jpeg';\n\n          reader.onload = function (_ref) {\n            var target = _ref.target;\n            var result = target.result;\n\n\n            resolve(checkOrientation ? _extends({\n              url: arrayBufferToDataURL(result, mimeType)\n            }, parseOrientation(getOrientation(result))) : {\n              url: result\n            });\n          };\n          reader.onabort = function () {\n            reject(new Error('Aborted to load the image with FileReader.'));\n          };\n          reader.onerror = function () {\n            reject(new Error('Failed to load the image with FileReader.'));\n          };\n\n          if (checkOrientation) {\n            reader.readAsArrayBuffer(file);\n          } else {\n            reader.readAsDataURL(file);\n          }\n        }\n      }).then(function (data) {\n        return new Promise(function (resolve, reject) {\n          image.onload = function () {\n            return resolve(_extends({}, data, {\n              naturalWidth: image.naturalWidth,\n              naturalHeight: image.naturalHeight\n            }));\n          };\n          image.onabort = function () {\n            reject(new Error('Aborted to load the image.'));\n          };\n          image.onerror = function () {\n            reject(new Error('Failed to load the image.'));\n          };\n          image.alt = file.name;\n          image.src = data.url;\n        });\n      }).then(function (_ref2) {\n        var naturalWidth = _ref2.naturalWidth,\n            naturalHeight = _ref2.naturalHeight,\n            _ref2$rotate = _ref2.rotate,\n            rotate = _ref2$rotate === undefined ? 0 : _ref2$rotate,\n            _ref2$scaleX = _ref2.scaleX,\n            scaleX = _ref2$scaleX === undefined ? 1 : _ref2$scaleX,\n            _ref2$scaleY = _ref2.scaleY,\n            scaleY = _ref2$scaleY === undefined ? 1 : _ref2$scaleY;\n        return new Promise(function (resolve) {\n          var canvas = document.createElement('canvas');\n          var context = canvas.getContext('2d');\n          var aspectRatio = naturalWidth / naturalHeight;\n          var maxWidth = Math.max(options.maxWidth, 0) || Infinity;\n          var maxHeight = Math.max(options.maxHeight, 0) || Infinity;\n          var minWidth = Math.max(options.minWidth, 0) || 0;\n          var minHeight = Math.max(options.minHeight, 0) || 0;\n          var width = naturalWidth;\n          var height = naturalHeight;\n\n          if (maxWidth < Infinity && maxHeight < Infinity) {\n            if (maxHeight * aspectRatio > maxWidth) {\n              maxHeight = maxWidth / aspectRatio;\n            } else {\n              maxWidth = maxHeight * aspectRatio;\n            }\n          } else if (maxWidth < Infinity) {\n            maxHeight = maxWidth / aspectRatio;\n          } else if (maxHeight < Infinity) {\n            maxWidth = maxHeight * aspectRatio;\n          }\n\n          if (minWidth > 0 && minHeight > 0) {\n            if (minHeight * aspectRatio > minWidth) {\n              minHeight = minWidth / aspectRatio;\n            } else {\n              minWidth = minHeight * aspectRatio;\n            }\n          } else if (minWidth > 0) {\n            minHeight = minWidth / aspectRatio;\n          } else if (minHeight > 0) {\n            minWidth = minHeight * aspectRatio;\n          }\n\n          if (options.width > 0) {\n            var _options = options;\n            width = _options.width;\n\n            height = width / aspectRatio;\n          } else if (options.height > 0) {\n            var _options2 = options;\n            height = _options2.height;\n\n            width = height * aspectRatio;\n          }\n\n          width = Math.min(Math.max(width, minWidth), maxWidth);\n          height = Math.min(Math.max(height, minHeight), maxHeight);\n\n          var destX = -width / 2;\n          var destY = -height / 2;\n          var destWidth = width;\n          var destHeight = height;\n\n          if (Math.abs(rotate) % 180 === 90) {\n            var _width$height = {\n              width: height,\n              height: width\n            };\n            width = _width$height.width;\n            height = _width$height.height;\n          }\n\n          canvas.width = normalizeDecimalNumber(width);\n          canvas.height = normalizeDecimalNumber(height);\n\n          if (!isImageType(options.mimeType)) {\n            options.mimeType = file.type;\n          }\n\n          var defaultFillStyle = 'transparent';\n\n          // Converts PNG files over the `convertSize` to JPEGs.\n          if (file.size > options.convertSize && options.mimeType === 'image/png') {\n            defaultFillStyle = '#fff';\n            options.mimeType = 'image/jpeg';\n          }\n\n          // Override the default fill color (#000, black)\n          context.fillStyle = defaultFillStyle;\n          context.fillRect(0, 0, width, height);\n          context.save();\n          context.translate(width / 2, height / 2);\n          context.rotate(rotate * Math.PI / 180);\n          context.scale(scaleX, scaleY);\n\n          if (options.beforeDraw) {\n            options.beforeDraw.call(_this, context, canvas);\n          }\n\n          context.drawImage(image, Math.floor(normalizeDecimalNumber(destX)), Math.floor(normalizeDecimalNumber(destY)), Math.floor(normalizeDecimalNumber(destWidth)), Math.floor(normalizeDecimalNumber(destHeight)));\n\n          if (options.drew) {\n            options.drew.call(_this, context, canvas);\n          }\n\n          context.restore();\n\n          var done = function done(result) {\n            resolve({\n              naturalWidth: naturalWidth,\n              naturalHeight: naturalHeight,\n              result: result\n            });\n          };\n\n          if (canvas.toBlob) {\n            canvas.toBlob(done, options.mimeType, options.quality);\n          } else {\n            done(canvasToBlob(canvas.toDataURL(options.mimeType, options.quality)));\n          }\n        });\n      }).then(function (_ref3) {\n        var naturalWidth = _ref3.naturalWidth,\n            naturalHeight = _ref3.naturalHeight,\n            result = _ref3.result;\n\n        if (URL && !options.checkOrientation) {\n          URL.revokeObjectURL(image.src);\n        }\n\n        if (result) {\n          // Returns original file if the result is greater than it and without size related options\n          if (result.size > file.size && options.mimeType === file.type && !(options.width > naturalWidth || options.height > naturalHeight || options.minWidth > naturalWidth || options.minHeight > naturalHeight)) {\n            result = file;\n          } else {\n            var date = new Date();\n\n            result.lastModified = date.getTime();\n            result.lastModifiedDate = date;\n            result.name = file.name;\n\n            // Convert the extension to match its type\n            if (result.name && result.type !== file.type) {\n              result.name = result.name.replace(REGEXP_EXTENSION, imageTypeToExtension(result.type));\n            }\n          }\n        } else {\n          // Returns original file if the result is null in some cases.\n          result = file;\n        }\n\n        _this.result = result;\n\n        if (options.success) {\n          options.success.call(_this, result);\n        }\n\n        return Promise.resolve(result);\n      }).catch(function (err) {\n        if (!options.error) {\n          throw err;\n        }\n\n        options.error.call(_this, err);\n      });\n    }\n  }]);\n  return ImageCompressor;\n}();\n\nexport default ImageCompressor;\n","module.exports = \".button-group {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  margin: 30px 0 0 0;\\r\\n}\\r\\n\\r\\n.btn {\\r\\n  margin: 0 10px;\\r\\n}\\r\\n\\r\\n.icon {\\r\\n  margin-right: 5px;\\r\\n}\\r\\n\\r\\n.second-panel {\\r\\n  margin-top: 30px;\\r\\n}\\r\\n\\r\\n.column {\\r\\n  margin: 5px 0;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvbWUvYm9va2luZy9ib29raW5nLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2Qsb0JBQW9CO0VBQ3BCLHdCQUF3QjtFQUN4QixtQkFBbUI7Q0FDcEI7O0FBRUQ7RUFDRSxlQUFlO0NBQ2hCOztBQUVEO0VBQ0Usa0JBQWtCO0NBQ25COztBQUVEO0VBQ0UsaUJBQWlCO0NBQ2xCOztBQUVEO0VBQ0UsY0FBYztDQUNmIiwiZmlsZSI6InNyYy9hcHAvdmlld3MvbWUvYm9va2luZy9ib29raW5nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnV0dG9uLWdyb3VwIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgbWFyZ2luOiAzMHB4IDAgMCAwO1xyXG59XHJcblxyXG4uYnRuIHtcclxuICBtYXJnaW46IDAgMTBweDtcclxufVxyXG5cclxuLmljb24ge1xyXG4gIG1hcmdpbi1yaWdodDogNXB4O1xyXG59XHJcblxyXG4uc2Vjb25kLXBhbmVsIHtcclxuICBtYXJnaW4tdG9wOiAzMHB4O1xyXG59XHJcblxyXG4uY29sdW1uIHtcclxuICBtYXJnaW46IDVweCAwO1xyXG59Il19 */\"","module.exports = \"<ng-container *ngIf=\\\"schema && booking\\\">\\r\\n  <ab-panel [schema]=\\\"schema.firstPanel\\\">\\r\\n    <panel-body>\\r\\n      <div *ngIf=\\\"booking\\\"\\r\\n           class=\\\"columns\\\">\\r\\n        <ng-container *ngFor=\\\"let field of schema.fields; let i = index\\\">\\r\\n          <div class=\\\"column col-12 text-center\\\">\\r\\n            <b class=\\\"text-bold\\\"> {{ field.label }}: </b>\\r\\n            <ng-container [ngSwitch]=\\\"field.key\\\">\\r\\n              <ab-pill *ngSwitchCase=\\\"'status'\\\"\\r\\n                       [text]=\\\"booking[field.key]\\\"></ab-pill>\\r\\n              <span *ngSwitchDefault>{{ booking[field.key] }}</span>\\r\\n            </ng-container>\\r\\n          </div>\\r\\n        </ng-container>\\r\\n      </div>\\r\\n      <ng-container *ngIf=\\\"(booking.status === 'ACTIVE') || (booking.status !== 'ACTIVE' &&!booking.rating)\\\">\\r\\n        <div class=\\\"button-group\\\">\\r\\n          <button *ngIf=\\\"booking.status === 'ACTIVE'\\\"\\r\\n                  class=\\\"btn btn-primary\\\"\\r\\n                  (click)=\\\"onShowEditModal()\\\">\\r\\n            <i class=\\\"icon icon-edit\\\"></i>Editar reserva</button>\\r\\n          <button *ngIf=\\\"booking.status === 'ACTIVE'\\\"\\r\\n                  class=\\\"btn btn-primary\\\"\\r\\n                  (click)=\\\"onShowCancelModal()\\\">\\r\\n            <i class=\\\"icon icon-cross\\\"></i>Cancelar reserva</button>\\r\\n          <button *ngIf=\\\"booking.status !== 'ACTIVE' &&!booking.rating\\\"\\r\\n                  class=\\\"btn btn-primary\\\"\\r\\n                  (click)=\\\"onShowRateModal()\\\">\\r\\n            <i class=\\\"icon icon-emoji\\\"></i>Valorar reserva</button>\\r\\n        </div>\\r\\n      </ng-container>\\r\\n    </panel-body>\\r\\n  </ab-panel>\\r\\n  <div *ngIf=\\\"schema && booking.rating\\\"\\r\\n       class=\\\"second-panel\\\">\\r\\n    <ab-panel [schema]=\\\"schema.secondPanel\\\">\\r\\n      <panel-body>\\r\\n        <div class=\\\"column col-12 text-center\\\">\\r\\n          <b class=\\\"text-bold\\\">Puntuacin: </b>\\r\\n          <span>{{ booking.rating.score }} sobre 5</span>\\r\\n        </div>\\r\\n        <div class=\\\"column col-12 text-center\\\">\\r\\n          <b class=\\\"text-bold\\\">Comentarios: </b>\\r\\n          <span>{{ booking.rating.comments }}</span>\\r\\n        </div>\\r\\n      </panel-body>\\r\\n    </ab-panel>\\r\\n  </div>\\r\\n  <ab-modal title=\\\"Editar reserva\\\"\\r\\n            [active]=\\\"showEditModal\\\"\\r\\n            (close)=\\\"showEditModal = false\\\">\\r\\n    <modal-content>\\r\\n      <ab-form [formSchema]=\\\"schema.editForm\\\"\\r\\n               (send)=\\\"onEdit($event)\\\">\\r\\n      </ab-form>\\r\\n    </modal-content>\\r\\n  </ab-modal>\\r\\n  <ab-modal title=\\\"Cancelar reserva\\\"\\r\\n            [active]=\\\"showCancelModal\\\"\\r\\n            (close)=\\\"showCancelModal = false\\\">\\r\\n    <modal-content>\\r\\n      <ab-card [data]=\\\"booking\\\"\\r\\n               [schema]=\\\"cardSchema\\\">\\r\\n      </ab-card>\\r\\n    </modal-content>\\r\\n    <modal-footer>\\r\\n      <button (click)=\\\"showCancelModal = false\\\"\\r\\n              class=\\\"btn btn-link\\\">Non, deixar</button>\\r\\n      <button (click)=\\\"onDelete()\\\"\\r\\n              class=\\\"btn btn-primary\\\">Si, cancelar</button>\\r\\n    </modal-footer>\\r\\n  </ab-modal>\\r\\n  <ab-modal title=\\\"Valorar oferta\\\"\\r\\n            [active]=\\\"showRateModal\\\"\\r\\n            (close)=\\\"showRateModal = false\\\">\\r\\n    <modal-content>\\r\\n      <ab-form [formSchema]=\\\"schema.rateForm\\\"\\r\\n               (send)=\\\"onRate($event)\\\">\\r\\n      </ab-form>\\r\\n    </modal-content>\\r\\n  </ab-modal>\\r\\n</ng-container>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { MeService } from 'app/views/me/me.service';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BusService } from 'app/tools/bus.service';\r\nimport { Level } from 'app/tools/message.model';\r\n\r\n@Component({\r\n  selector: 'ab-booking',\r\n  templateUrl: './booking.component.html',\r\n  styleUrls: ['./booking.component.css']\r\n})\r\nexport class BookingComponent implements OnInit {\r\n  public schema;\r\n  public cardSchema;\r\n  public bookingId;\r\n  public booking;\r\n  public showEditModal = false;\r\n  public showCancelModal = false;\r\n  public showRateModal = false;\r\n\r\n  constructor(\r\n    private bus: BusService,\r\n    private route: ActivatedRoute,\r\n    private me: MeService,\r\n    private schemaService: SchemaService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.route.params.subscribe(params => {\r\n      this.bookingId = params['bookingId'];\r\n      this.schemaService.getSchema$('me_booking').subscribe(schema => {\r\n        this.schema = schema;\r\n        this.cardSchema = { header: { title: '' }, fields: this.schema.fields };\r\n        this.getBooking();\r\n      });\r\n    });\r\n  }\r\n\r\n  getBooking() {\r\n    this.me.getBooking(this.bookingId).subscribe(booking => {\r\n      this.booking = booking;\r\n      this.schema.firstPanel.header.title += (' para ' + this.booking.event.name);\r\n      this.schemaService.populateDefaultValues(this.schema.editForm, this.booking);\r\n    });\r\n  }\r\n\r\n  onShowEditModal() {\r\n    this.showEditModal = true;\r\n  }\r\n\r\n  onShowCancelModal() {\r\n    this.showCancelModal = true;\r\n  }\r\n\r\n  onShowRateModal() {\r\n    this.showRateModal = true;\r\n  }\r\n\r\n  onEdit(data) {\r\n    const bookingTemp = Object.assign({}, this.booking);\r\n    bookingTemp.comments = data.comments;\r\n    bookingTemp.seats = data.seats;\r\n    bookingTemp.eventId = this.booking.event._id;\r\n    delete bookingTemp.event;\r\n    this.me.editBooking(bookingTemp).subscribe(booking => {\r\n      this.getBooking();\r\n      this.showEditModal = false;\r\n      this.bus.emit({ level: Level.SUCCESS, text: 'Reserva editada con xito', code: '' });\r\n    });\r\n  }\r\n\r\n  onDelete() {\r\n    const bookingTemp = Object.assign({}, this.booking);\r\n    bookingTemp.eventId = this.booking.event._id;\r\n    delete bookingTemp.event;\r\n    this.me.changeBookingStatus(bookingTemp, 'CANCELED').subscribe(() => {\r\n      this.getBooking();\r\n      this.showCancelModal = false;\r\n      this.bus.emit({ level: Level.SUCCESS, text: 'Reserva cancelada con xito', code: '' });\r\n    });\r\n  }\r\n\r\n  onRate(payload) {\r\n    this.me.rateBooking(this.bookingId, payload).subscribe(booking => {\r\n      this.booking = booking;\r\n      this.showRateModal = false;\r\n      this.bus.emit({ level: Level.SUCCESS, text: 'Valoracin enviada con xito', code: '' });\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \"<ng-container *ngIf=\\\"schema\\\">\\r\\n  <ab-panel [schema]=\\\"{}\\\">\\r\\n    <panel-body>\\r\\n      <ab-editor [actionSchema]=\\\"schema.actions\\\"\\r\\n                 [tableData]=\\\"bookings\\\"\\r\\n                 [cardSchema]=\\\"cardSchema\\\"\\r\\n                 [reportSchema]=\\\"schema.report\\\"\\r\\n                 [filterSchema]=\\\"'bookings_filter'\\\"\\r\\n                 [cardSchema]=\\\"schema.cardSchema\\\"\\r\\n                 (filter)=\\\"onFilter($event)\\\">\\r\\n      </ab-editor>\\r\\n    </panel-body>\\r\\n  </ab-panel>\\r\\n</ng-container>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { MeService } from 'app/views/me/me.service';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { FormToolsService } from 'app/tools/components/forms/form-tools.service';\r\nimport { BusService } from 'app/tools/bus.service';\r\nimport { Level } from 'app/tools/message.model';\r\n\r\n@Component({\r\n  selector: 'ab-bookings',\r\n  templateUrl: './bookings.component.html',\r\n  styles: []\r\n})\r\nexport class BookingsComponent implements OnInit {\r\n\r\n  public schema;\r\n  public cardSchema;\r\n  public bookings;\r\n  public eventId;\r\n\r\n  constructor(\r\n    private bus: BusService,\r\n    private route: ActivatedRoute,\r\n    private me: MeService,\r\n    private schemaService: SchemaService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.route.params.subscribe(params => {\r\n      this.eventId = params['eventId'];\r\n      this.schemaService.getSchema$('me_bookings').subscribe(schema => {\r\n        this.schema = schema;\r\n        this.cardSchema = { header: { title: '' }, fields: this.schema.report.fields };\r\n        this.getBookings();\r\n      });\r\n    });\r\n  }\r\n\r\n  onFilter(payload) {\r\n    this.getBookings(payload);\r\n  }\r\n\r\n  getBookings(payload?) {\r\n    this.me.getBookingsByUserId(payload)\r\n      .subscribe(bookings => {\r\n        this.bookings = bookings;\r\n      });\r\n  }\r\n\r\n}\r\n","module.exports = \"<ab-panel [schema]=\\\"{}\\\">\\r\\n  <panel-body>\\r\\n    <ab-editor [actionSchema]=\\\"schema?.actions\\\"\\r\\n               [tableData]=\\\"bookings\\\"\\r\\n               [cardSchema]=\\\"cardSchema\\\"\\r\\n               [reportSchema]=\\\"schema?.report\\\"\\r\\n               (rowAction)=\\\"onRowAction($event)\\\"\\r\\n               [cardSchema]=\\\"schema?.cardSchema\\\"\\r\\n               (delete)=\\\"onDelete($event)\\\">\\r\\n    </ab-editor>\\r\\n  </panel-body>\\r\\n</ab-panel>\\r\\n<ab-modal [title]=\\\"'Observacins sobre ' + selectedBooking.owner.name\\\"\\r\\n          [active]=\\\"showObservationsModal\\\"\\r\\n          (close)=\\\"showObservationsModal = false\\\"\\r\\n          *ngIf=\\\"selectedBooking\\\">\\r\\n  <modal-content>\\r\\n    <p>{{ selectedBooking.observation }}</p>\\r\\n  </modal-content>\\r\\n</ab-modal>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { MeService } from 'app/views/me/me.service';\r\n\r\n@Component({\r\n  selector: 'ab-event-bookings',\r\n  templateUrl: './event-bookings.component.html',\r\n  styles: []\r\n})\r\nexport class EventBookingsComponent implements OnInit {\r\n\r\n  public schema;\r\n  public cardSchema;\r\n  public bookings;\r\n  public event;\r\n  public eventSlug;\r\n  public showObservationsModal = false;\r\n  public selectedBooking;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private me: MeService,\r\n    private schemaService: SchemaService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.route.params.subscribe(params => {\r\n      this.eventSlug = params['slug'];\r\n      this.schemaService.getSchema$('me_event_bookings').subscribe(schema => {\r\n        this.schema = schema;\r\n        this.cardSchema = { header: { title: '' }, fields: this.schema.report.fields };\r\n        this.getEvent();\r\n      });\r\n    });\r\n  }\r\n\r\n  getEvent() {\r\n    this.me.getEventBySlug(this.eventSlug).subscribe(event => {\r\n      this.event = event[0];\r\n      // this.schema.actions.actions[0].link = '/me/events-ushier/' + this.event.slug + '/bookings';\r\n      this.populateEventInfo();\r\n      this.getBookings();\r\n    });\r\n  };\r\n\r\n  getBookings() {\r\n    this.me.getBookingsByEventId(this.event._id).subscribe(bookings => {\r\n      this.bookings = bookings;\r\n    });\r\n  }\r\n\r\n  populateEventInfo() {\r\n    if (this.event.name && this.event.name.length > 0) {\r\n      this.schema.actions.header.title = this.schema.actions.header.title + ' - ' + this.event.name;\r\n    }\r\n    this.schema.actions.header.title +=\r\n      ' - ' + new Date(this.event.date).toLocaleString().split(' ')[0]\r\n      + ' ' + this.event.shift;\r\n  }\r\n\r\n  onRowAction(action) {\r\n    if (action.key === 'activate') {\r\n      this.me.changeBookingStatus(action.value, 'ACTIVE').subscribe(() => {\r\n        this.getBookings();\r\n      });\r\n    } else {\r\n      this.selectedBooking = action.value;\r\n      console.log(this.selectedBooking);\r\n      this.showObservationsModal = true;\r\n    }\r\n  }\r\n\r\n  onDelete(action) {\r\n    this.me.changeBookingStatus(action, 'CANCELED').subscribe(() => {\r\n      this.getBookings();\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \".navbar {\\r\\n  height: 60px;\\r\\n  margin-bottom: 30px;\\r\\n}\\r\\n\\r\\n.bookings {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.booking {\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n}\\r\\n\\r\\n.booking p {\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvbWUvZXZlbnQtcHJpbnQvZXZlbnQtcHJpbnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7RUFDYixvQkFBb0I7Q0FDckI7O0FBRUQ7RUFDRSxjQUFjO0VBQ2QsdUJBQXVCO0NBQ3hCOztBQUVEO0VBQ0UsY0FBYztFQUNkLG9CQUFvQjtDQUNyQjs7QUFFRDtFQUNFLFVBQVU7Q0FDWCIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL21lL2V2ZW50LXByaW50L2V2ZW50LXByaW50LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubmF2YmFyIHtcclxuICBoZWlnaHQ6IDYwcHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogMzBweDtcclxufVxyXG5cclxuLmJvb2tpbmdzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbn1cclxuXHJcbi5ib29raW5nIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbn1cclxuXHJcbi5ib29raW5nIHAge1xyXG4gIG1hcmdpbjogMDtcclxufVxyXG4iXX0= */\"","module.exports = \"<header class=\\\"navbar\\\">\\r\\n  <section class=\\\"navbar-section\\\">\\r\\n    <a class=\\\"navbar-brand\\\"\\r\\n       (click)=\\\"onNavigateToHome()\\\">{{ organization?.name }}</a>\\r\\n  </section>\\r\\n  <section class=\\\"navbar-section\\\">\\r\\n    <div class=\\\"input-group input-inline\\\">\\r\\n      <button class=\\\"btn btn-primary input-group-btn\\\"\\r\\n              (click)=\\\"onPrint()\\\">Imprimir</button>\\r\\n    </div>\\r\\n  </section>\\r\\n</header>\\r\\n<ng-container *ngIf=\\\"event\\\">\\r\\n  <h3>{{ event.name }}</h3>\\r\\n  <h5>{{ event.date |date }} de {{ event.startTime }} a {{ event.endTime }}</h5>\\r\\n  <div [innerHTML]=\\\"event.description\\\"></div>\\r\\n  <ul>\\r\\n    <li>Prazas ocupadas:\\r\\n      <b>{{ event.capacity - event.freeSeats }} de {{ event.capacity }}</b>\\r\\n    </li>\\r\\n  </ul>\\r\\n</ng-container>\\r\\n<h3>Reservas</h3>\\r\\n<div *ngIf=\\\"bookings && bookings.length; else: noBookings\\\"\\r\\n     class=\\\"bookings\\\">\\r\\n  <div *ngFor=\\\"let booking of bookings; let i = index\\\"\\r\\n       class=\\\"booking\\\">\\r\\n    <h5>{{ i + 1 }}. {{ booking.owner.name }} ({{ booking.owner.roles }}) - {{ booking.seats }} prazas</h5>\\r\\n    <p *ngIf=\\\"booking.comments\\\">&nbsp;- {{ booking.comments }}</p>\\r\\n  </div>\\r\\n</div>\\r\\n<ng-template #noBookings>\\r\\n  <h2>Anda non hai reservas para este evento</h2>\\r\\n</ng-template>\\r\\n\"","import { Component, OnInit, AfterViewInit, AfterViewChecked, Inject } from '@angular/core';\r\nimport { BusService } from '../../../tools/bus.service';\r\nimport { MeService } from '../me.service';\r\nimport { ActivatedRoute, Params, Router } from '@angular/router';\r\nimport { SecurityService } from '../../../tools/security.service';\r\nimport { map } from 'rxjs/operators';\r\n\r\ndeclare var window: any;\r\n\r\n@Component({\r\n  selector: 'ab-event-print',\r\n  templateUrl: './event-print.component.html',\r\n  styleUrls: ['./event-print.component.css']\r\n})\r\nexport class EventPrintComponent implements OnInit {\r\n\r\n  public event: any;\r\n  public bookings: any;\r\n  public organization: any;\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute,\r\n    private busService: BusService,\r\n    private meService: MeService,\r\n    private securityService: SecurityService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.busService.emitIsPrintingMode(true);\r\n    this.getOrganization();\r\n    this.activatedRoute.params.subscribe((params: Params) => {\r\n      this.getEvent(params.id);\r\n      this.getBookings(params.id);\r\n    });\r\n  }\r\n\r\n  getOrganization() {\r\n    this.organization = this.securityService.getLocalOrganization();\r\n  }\r\n\r\n  getEvent(eventId: string) {\r\n    this.meService.getEventById(eventId).subscribe(\r\n      (event) => {\r\n        this.event = event;\r\n      }\r\n    )\r\n  }\r\n\r\n  getBookings(eventId) {\r\n    this.meService.getBookingsByEventId(eventId)\r\n      .pipe(\r\n        map((bookings: any) => {\r\n          return bookings.sort((a, b) => {\r\n            return a.name > b.name;\r\n          });\r\n        })\r\n      ).subscribe(\r\n        (bookings) => {\r\n          this.bookings = bookings;\r\n        }\r\n      )\r\n  }\r\n\r\n  onNavigateToHome() {\r\n    this.busService.emitIsPrintingMode(false);\r\n    this.router.navigateByUrl('');\r\n  }\r\n\r\n  onPrint() {\r\n    window.print();\r\n  }\r\n\r\n}\r\n","module.exports = \".second {\\r\\n  margin-top: 30px;\\r\\n}\\r\\n\\r\\n.card-column {\\r\\n  padding: 0 0;\\r\\n}\\r\\n\\r\\n.card {\\r\\n  padding: 0 0;\\r\\n  margin-bottom: 0.8rem;\\r\\n}\\r\\n\\r\\n.card-header {\\r\\n  display: flex;\\r\\n}\\r\\n\\r\\n.status {\\r\\n  margin: 0.5rem 0;\\r\\n}\\r\\n\\r\\n.col-2 {\\r\\n  align-self: center;\\r\\n}\\r\\n\\r\\n.col-10 {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: left;\\r\\n  justify-content: space-around;\\r\\n  margin-left: 0.5rem;\\r\\n}\\r\\n\\r\\n.buttons-container {\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  justify-content: flex-end;\\r\\n}\\r\\n\\r\\nimg {\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.img-col {\\r\\n  padding-left: 0 !important;\\r\\n  padding-right: 0 !important;\\r\\n}\\r\\n\\r\\n.delete-buttons-container {\\r\\n  display: flex;\\r\\n  justify-content: flex-end;\\r\\n  margin-top: 1rem;\\r\\n}\\r\\n\\r\\n.delete-button {\\r\\n  margin-left: 0.5rem;\\r\\n}\\r\\n\\r\\n@media(max-width: 600px) {\\r\\n  .buttons-container {\\r\\n    align-items: center !important;\\r\\n    flex-direction: column !important;\\r\\n  }\\r\\n\\r\\n  .ml-2 {\\r\\n    margin-left: 0;\\r\\n    margin-top: 0.4rem;\\r\\n  }\\r\\n\\r\\n  .card-header {\\r\\n    display: block;\\r\\n  }\\r\\n\\r\\n  .col-10 {\\r\\n    margin-left: 0;\\r\\n    align-items: center;\\r\\n  }\\r\\n\\r\\n  img {\\r\\n    padding-bottom: 0.8rem;\\r\\n  }\\r\\n\\r\\n  .text-left {\\r\\n    margin-left: 0px;\\r\\n  }\\r\\n\\r\\n  .status {\\r\\n    margin: 0.5rem 0;\\r\\n  }\\r\\n}\\r\\n\\r\\n@media(max-width: 1280px) {\\r\\n  .buttons-container {\\r\\n    align-items: left;\\r\\n    justify-content: center;\\r\\n    flex-wrap: wrap;\\r\\n  }\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvbWUvZXZlbnQvZXZlbnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFpQjtDQUNsQjs7QUFFRDtFQUNFLGFBQWE7Q0FDZDs7QUFFRDtFQUNFLGFBQWE7RUFDYixzQkFBc0I7Q0FDdkI7O0FBRUQ7RUFDRSxjQUFjO0NBQ2Y7O0FBRUQ7RUFDRSxpQkFBaUI7Q0FDbEI7O0FBRUQ7RUFDRSxtQkFBbUI7Q0FDcEI7O0FBRUQ7RUFDRSxjQUFjO0VBQ2QsdUJBQXVCO0VBQ3ZCLGtCQUFrQjtFQUNsQiw4QkFBOEI7RUFDOUIsb0JBQW9CO0NBQ3JCOztBQUVEO0VBQ0UsWUFBWTtFQUNaLGNBQWM7RUFDZCxvQkFBb0I7RUFDcEIsMEJBQTBCO0NBQzNCOztBQUVEO0VBQ0UsWUFBWTtDQUNiOztBQUVEO0VBQ0UsMkJBQTJCO0VBQzNCLDRCQUE0QjtDQUM3Qjs7QUFFRDtFQUNFLGNBQWM7RUFDZCwwQkFBMEI7RUFDMUIsaUJBQWlCO0NBQ2xCOztBQUVEO0VBQ0Usb0JBQW9CO0NBQ3JCOztBQUVEO0VBQ0U7SUFDRSwrQkFBK0I7SUFDL0Isa0NBQWtDO0dBQ25DOztFQUVEO0lBQ0UsZUFBZTtJQUNmLG1CQUFtQjtHQUNwQjs7RUFFRDtJQUNFLGVBQWU7R0FDaEI7O0VBRUQ7SUFDRSxlQUFlO0lBQ2Ysb0JBQW9CO0dBQ3JCOztFQUVEO0lBQ0UsdUJBQXVCO0dBQ3hCOztFQUVEO0lBQ0UsaUJBQWlCO0dBQ2xCOztFQUVEO0lBQ0UsaUJBQWlCO0dBQ2xCO0NBQ0Y7O0FBRUQ7RUFDRTtJQUNFLGtCQUFrQjtJQUNsQix3QkFBd0I7SUFDeEIsZ0JBQWdCO0dBQ2pCO0NBQ0YiLCJmaWxlIjoic3JjL2FwcC92aWV3cy9tZS9ldmVudC9ldmVudC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNlY29uZCB7XHJcbiAgbWFyZ2luLXRvcDogMzBweDtcclxufVxyXG5cclxuLmNhcmQtY29sdW1uIHtcclxuICBwYWRkaW5nOiAwIDA7XHJcbn1cclxuXHJcbi5jYXJkIHtcclxuICBwYWRkaW5nOiAwIDA7XHJcbiAgbWFyZ2luLWJvdHRvbTogMC44cmVtO1xyXG59XHJcblxyXG4uY2FyZC1oZWFkZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbn1cclxuXHJcbi5zdGF0dXMge1xyXG4gIG1hcmdpbjogMC41cmVtIDA7XHJcbn1cclxuXHJcbi5jb2wtMiB7XHJcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xyXG59XHJcblxyXG4uY29sLTEwIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgYWxpZ24taXRlbXM6IGxlZnQ7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XHJcbiAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcclxufVxyXG5cclxuLmJ1dHRvbnMtY29udGFpbmVyIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxufVxyXG5cclxuaW1nIHtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLmltZy1jb2wge1xyXG4gIHBhZGRpbmctbGVmdDogMCAhaW1wb3J0YW50O1xyXG4gIHBhZGRpbmctcmlnaHQ6IDAgIWltcG9ydGFudDtcclxufVxyXG5cclxuLmRlbGV0ZS1idXR0b25zLWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xyXG4gIG1hcmdpbi10b3A6IDFyZW07XHJcbn1cclxuXHJcbi5kZWxldGUtYnV0dG9uIHtcclxuICBtYXJnaW4tbGVmdDogMC41cmVtO1xyXG59XHJcblxyXG5AbWVkaWEobWF4LXdpZHRoOiA2MDBweCkge1xyXG4gIC5idXR0b25zLWNvbnRhaW5lciB7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQ7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG5cclxuICAubWwtMiB7XHJcbiAgICBtYXJnaW4tbGVmdDogMDtcclxuICAgIG1hcmdpbi10b3A6IDAuNHJlbTtcclxuICB9XHJcblxyXG4gIC5jYXJkLWhlYWRlciB7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICB9XHJcblxyXG4gIC5jb2wtMTAge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDA7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIH1cclxuXHJcbiAgaW1nIHtcclxuICAgIHBhZGRpbmctYm90dG9tOiAwLjhyZW07XHJcbiAgfVxyXG5cclxuICAudGV4dC1sZWZ0IHtcclxuICAgIG1hcmdpbi1sZWZ0OiAwcHg7XHJcbiAgfVxyXG5cclxuICAuc3RhdHVzIHtcclxuICAgIG1hcmdpbjogMC41cmVtIDA7XHJcbiAgfVxyXG59XHJcblxyXG5AbWVkaWEobWF4LXdpZHRoOiAxMjgwcHgpIHtcclxuICAuYnV0dG9ucy1jb250YWluZXIge1xyXG4gICAgYWxpZ24taXRlbXM6IGxlZnQ7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGZsZXgtd3JhcDogd3JhcDtcclxuICB9XHJcbn1cclxuIl19 */\"","module.exports = \"<div class=\\\"column col-12 card-column\\\" *ngIf=\\\"event\\\">\\r\\n  <div class=\\\"card\\\">\\r\\n    <div class=\\\"card-header\\\">\\r\\n      <div class=\\\"column col-2 col-sm-12 img-col\\\">\\r\\n        <img\\r\\n          *ngIf=\\\"event?.thumbnail && event?.thumbnail.url\\\"\\r\\n          [src]=\\\"event?.thumbnail.url\\\"\\r\\n          class=\\\"img-responsive\\\"\\r\\n          (click)=\\\"onShowThumbnailModal()\\\"\\r\\n        />\\r\\n        <img\\r\\n          *ngIf=\\\"!event?.thumbnail || !event?.thumbnail.url\\\"\\r\\n          src=\\\"assets/images/events-placeholder.jpg\\\"\\r\\n          class=\\\"img-responsive\\\"\\r\\n          (click)=\\\"onShowThumbnailModal()\\\"\\r\\n        />\\r\\n      </div>\\r\\n      <div class=\\\"column col-10 col-sm-12\\\">\\r\\n        <div class=\\\"card-title h2 text-left\\\">{{ event?.name }}</div>\\r\\n        <div class=\\\"status\\\"><ab-pill [text]=\\\"event?.status\\\"></ab-pill></div>\\r\\n        <div class=\\\"buttons-container\\\">\\r\\n          <a\\r\\n            class=\\\"btn btn-link\\\"\\r\\n            [ngClass]=\\\"{ disabled: event.status === 'CANCELED' }\\\"\\r\\n            [routerLink]=\\\"['/org', organization.slug, 'events', event._id]\\\"\\r\\n          >\\r\\n            Ver oferta</a\\r\\n          >\\r\\n          <button\\r\\n            class=\\\"btn btn-link badge\\\"\\r\\n            [ngClass]=\\\"{ disabled: event.status === 'CANCELED' }\\\"\\r\\n            [attr.data-badge]=\\\"event.files ? event.files.length : 0\\\"\\r\\n            (click)=\\\"onScrollToFiles()\\\"\\r\\n          >\\r\\n            <i class=\\\"icon icon-link mr-1\\\"></i>Arquivos\\r\\n          </button>\\r\\n          <div *ngFor=\\\"let action of editActionsSchema\\\" class=\\\"ml-2\\\">\\r\\n            <ab-action\\r\\n              *ngIf=\\\"!action.disabled\\\"\\r\\n              [schema]=\\\"action\\\"\\r\\n              (action)=\\\"onEditAction(action.key)\\\"\\r\\n            ></ab-action>\\r\\n          </div>\\r\\n          <a class=\\\"btn ml-2\\\" [routerLink]=\\\"['print']\\\" target=\\\"_blank\\\">\\r\\n            <i class=\\\"icon icon-share mr-1\\\"></i>Imprimir</a\\r\\n          >\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<ab-panel [schema]=\\\"panelSchema\\\">\\r\\n  <panel-body>\\r\\n    <ab-form [formSchema]=\\\"formSchema\\\" (send)=\\\"onSend($event)\\\"> </ab-form>\\r\\n  </panel-body>\\r\\n</ab-panel>\\r\\n<ab-modal\\r\\n  title=\\\"Miniatura (menor de 1 mega) da oferta \\\"\\r\\n  [active]=\\\"showThumbnailModal\\\"\\r\\n  (close)=\\\"this.showThumbnailModal = false\\\"\\r\\n>\\r\\n  <modal-content>\\r\\n    <input\\r\\n      #thumbnailInput\\r\\n      type=\\\"file\\\"\\r\\n      accept=\\\".jpg, .jpeg, .png\\\"\\r\\n      multiple=\\\"false\\\"\\r\\n    />\\r\\n  </modal-content>\\r\\n  <modal-footer>\\r\\n    <ab-action\\r\\n      [schema]=\\\"fileConfirmButton\\\"\\r\\n      (action)=\\\"uploadThumbnail(this.event)\\\"\\r\\n    >\\r\\n    </ab-action>\\r\\n  </modal-footer>\\r\\n</ab-modal>\\r\\n<div class=\\\"second\\\" #filesSectionRef *ngIf=\\\"formKey === 'edit'\\\">\\r\\n  <ab-panel [schema]=\\\"{}\\\">\\r\\n    <panel-body>\\r\\n      <ab-tile [schema]=\\\"filesSchema\\\" (send)=\\\"this.showFilesModal = true\\\">\\r\\n      </ab-tile>\\r\\n      <ng-container *ngIf=\\\"formKey === 'edit' && event?.files\\\">\\r\\n        <ab-tile-compact\\r\\n          *ngFor=\\\"let file of event.files\\\"\\r\\n          [image]=\\\"file\\\"\\r\\n          (clicked)=\\\"onDeleteFile(file)\\\"\\r\\n        >\\r\\n        </ab-tile-compact>\\r\\n      </ng-container>\\r\\n    </panel-body>\\r\\n  </ab-panel>\\r\\n  <ab-modal\\r\\n    title=\\\"Subir arquivos\\\"\\r\\n    [active]=\\\"showFilesModal\\\"\\r\\n    (close)=\\\"this.showFilesModal = false\\\"\\r\\n  >\\r\\n    <modal-content>\\r\\n      <input #filesInput type=\\\"file\\\" multiple=\\\"true\\\" />\\r\\n    </modal-content>\\r\\n    <modal-footer>\\r\\n      <ab-action\\r\\n        [schema]=\\\"fileConfirmButton\\\"\\r\\n        (action)=\\\"uploadFiles(this.event)\\\"\\r\\n      >\\r\\n      </ab-action>\\r\\n    </modal-footer>\\r\\n  </ab-modal>\\r\\n</div>\\r\\n<ab-modal\\r\\n  [title]=\\\"'Modificar oferta'\\\"\\r\\n  [active]=\\\"isDeletingMode\\\"\\r\\n  (close)=\\\"onCloseDeleteModal()\\\"\\r\\n>\\r\\n  <modal-content>\\r\\n    <div\\r\\n      class=\\\"form-container\\\"\\r\\n      *ngIf=\\\"isDeletingMode\\\"\\r\\n      (submit)=\\\"onSubmitDeleteForm()\\\"\\r\\n    >\\r\\n      <form [formGroup]=\\\"deleteForm\\\">\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <label class=\\\"form-switch\\\">\\r\\n            <input type=\\\"checkbox\\\" formControlName=\\\"sendMessage\\\" />\\r\\n            <i class=\\\"form-icon\\\"></i> Enviar mensaxe de cancelacin aos\\r\\n            asistentes\\r\\n          </label>\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\" *ngIf=\\\"deleteForm.get('sendMessage').value\\\">\\r\\n          <label class=\\\"form-switch\\\">\\r\\n            <input type=\\\"checkbox\\\" formControlName=\\\"sendCustomMessage\\\" />\\r\\n            <i class=\\\"form-icon\\\"></i> Personalizar a mensaxe de cancelacin\\r\\n          </label>\\r\\n        </div>\\r\\n        <div\\r\\n          class=\\\"form-group\\\"\\r\\n          *ngIf=\\\"\\r\\n            deleteForm.get('sendMessage').value &&\\r\\n            deleteForm.get('sendCustomMessage').value\\r\\n          \\\"\\r\\n        >\\r\\n          <label class=\\\"form-label\\\" for=\\\"input-example-3\\\">Mensaxe</label>\\r\\n          <textarea\\r\\n            class=\\\"form-input\\\"\\r\\n            formControlName=\\\"customMessage\\\"\\r\\n            placeholder=\\\"Mensaxe personalizada\\\"\\r\\n            rows=\\\"3\\\"\\r\\n          ></textarea>\\r\\n        </div>\\r\\n        <div class=\\\"form-group delete-buttons-container\\\">\\r\\n          <button class=\\\"btn\\\" (click)=\\\"onReturnFromDeletingMode()\\\">\\r\\n            Volver atrs\\r\\n          </button>\\r\\n          <button\\r\\n            class=\\\"btn btn-primary delete-button\\\"\\r\\n            type=\\\"submit\\\"\\r\\n            [disabled]=\\\"!deleteForm.valid\\\"\\r\\n          >\\r\\n            Eliminar oferta\\r\\n          </button>\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </modal-content>\\r\\n</ab-modal>\\r\\n\"","import { Component, ElementRef, OnInit, ViewChild } from \"@angular/core\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { DomSanitizer } from \"@angular/platform-browser\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { BusService } from \"app/tools/bus.service\";\r\nimport { SchemaService } from \"app/tools/components/schema.service\";\r\nimport { Level } from \"app/tools/message.model\";\r\nimport { IAction, IFormSchema, IWidgetSchema } from 'app/tools/schema.model';\r\nimport { SecurityService } from 'app/tools/security.service';\r\nimport { MeService } from 'app/views/me/me.service';\r\nimport ImageCompressor from 'image-compressor.js';\r\n\r\nconst YEAR_POSITION = 0;\r\nconst MONTH_POSITION = 1;\r\nconst DAY_POSITION = 2;\r\nconst DATE_LENGTH = 10;\r\nconst DAY_HOUR = 14;\r\nconst NIGHT_HOUR = 21;\r\n\r\n@Component({\r\n  selector: 'ab-event',\r\n  templateUrl: './event.component.html',\r\n  styleUrls: ['./event.component.css']\r\n})\r\nexport class EventComponent implements OnInit {\r\n  @ViewChild('thumbnailInput') thumbnailInput: ElementRef;\r\n  @ViewChild('filesInput') filesInput: ElementRef;\r\n  @ViewChild('filesSectionRef') filesSectionRef: ElementRef;\r\n\r\n  public formKey: 'create' | 'edit' = 'create';\r\n  public panelSchema: IWidgetSchema;\r\n  public filesSchema: IWidgetSchema;\r\n  public editActionsSchema: IWidgetSchema;\r\n  public thumbnailSchema: IWidgetSchema;\r\n  public formSchema: IFormSchema;\r\n  public showFilesModal = false;\r\n  public showThumbnailModal = false;\r\n  public fileConfirmButton = {\r\n    label: 'Subir',\r\n    key: 'upload'\r\n  };\r\n  public organization: any;\r\n  public event: any;\r\n  public isDeletingMode;\r\n  public deleteForm: FormGroup;\r\n\r\n  constructor(\r\n    private schema: SchemaService,\r\n    private route: ActivatedRoute,\r\n    private me: MeService,\r\n    private security: SecurityService,\r\n    private bus: BusService,\r\n    private router: Router,\r\n    private fb: FormBuilder,\r\n    private sanitizer: DomSanitizer\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.createDeleteForm();\r\n    this.organization = this.security.getLocalOrganization();\r\n    this.route.params.subscribe(params => {\r\n      if (params['id']) {\r\n        this.formKey = 'edit';\r\n        this.me.getEventById(params['id']).subscribe((ev: any) => {\r\n          this.event = ev;\r\n          if (ev.thumbnail) {\r\n            const url = `data:${ev.thumbnail.type};base64, ${\r\n              ev.thumbnail.content\r\n            }`;\r\n\r\n            ev.thumbnail.url = this.sanitizer.bypassSecurityTrustUrl(url);\r\n          }\r\n          this.getSchemas();\r\n        });\r\n      } else {\r\n        this.getSchemas();\r\n      }\r\n    });\r\n  }\r\n\r\n  getSchemas() {\r\n    this.schema.getSchema$('me_event').subscribe(schemas => {\r\n      this.panelSchema = schemas;\r\n      this.filesSchema = schemas['tile-files'];\r\n      this.thumbnailSchema = schemas['tile-thumbnail'];\r\n      if (this.event) {\r\n        this.editActionsSchema = this.calcButtons(schemas.editActions);\r\n      }\r\n      this.formSchema = schemas[this.formKey];\r\n      if (this.event) {\r\n        this.panelSchema.header.title = 'Informacin da oferta';\r\n        this.schema.populateDefaultValues(this.formSchema, this.event);\r\n        this.formSchema.controls[0].defaultValue = new Date(this.event.date)\r\n          .toISOString()\r\n          .slice(0, DATE_LENGTH);\r\n      } else {\r\n        this.schema.populateDefaultValues(this.formSchema, this.organization);\r\n        this.formSchema.controls[0].defaultValue = 'dd/mm/aaaa';\r\n        // tslint:disable-next-line:no-magic-numbers\r\n        this.formSchema.controls[4].defaultValue = 'hh:mm';\r\n        // tslint:disable-next-line:no-magic-numbers\r\n        this.formSchema.controls[5].defaultValue = 'hh:mm';\r\n      }\r\n    });\r\n  }\r\n\r\n  calcButtons(editActions: IAction[]): any {\r\n    editActions.map(action => {\r\n      if (this.event.status === 'CANCELED') {\r\n        action.disabled = true;\r\n      } else {\r\n        if (this.event.status === action.disabledStatus) {\r\n          action.disabled = true;\r\n        } else {\r\n        }\r\n      }\r\n    });\r\n    return editActions;\r\n  }\r\n\r\n  createDeleteForm() {\r\n    this.deleteForm = this.fb.group({\r\n      sendMessage: [false, Validators.required],\r\n      sendCustomMessage: [false, Validators.required],\r\n      customMessage: ['']\r\n    });\r\n  }\r\n\r\n  onSend(ev) {\r\n    const data = Object.assign({}, ev);\r\n\r\n    this.transformDate(data);\r\n    if (this.formKey === 'create') {\r\n      this.me.postEvent(data).subscribe((event: any) => {\r\n        this.bus.emit({\r\n          level: Level.SUCCESS,\r\n          text: 'Oferta creada con xito',\r\n          code: ''\r\n        });\r\n        this.event = event;\r\n        this.formKey = 'edit';\r\n        this.ngOnInit();\r\n      });\r\n    }\r\n    if (this.formKey === 'edit') {\r\n      this.updateEvent(data);\r\n      this.me.editEvent(this.event).subscribe(d => {\r\n        data.ownerId = this.event.ownerId;\r\n        this.ngOnInit();\r\n        this.bus.emit({\r\n          level: Level.SUCCESS,\r\n          text: 'Oferta editada con xito',\r\n          code: ''\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  updateEvent(data) {\r\n    Object.keys(data).map(key => {\r\n      this.event[key] = data[key];\r\n    });\r\n  }\r\n\r\n  uploadThumbnail(event) {\r\n    const thumbnail: File = this.thumbnailInput.nativeElement.files[0];\r\n    const kilo = 1024;\r\n    const fileMegas = thumbnail.size / kilo / kilo;\r\n    if (fileMegas > 1) {\r\n      this.bus.emit({\r\n        level: Level.ERROR,\r\n        text: 'Mximo 1 Mega',\r\n        code: ''\r\n      });\r\n      this.showThumbnailModal = false;\r\n      return;\r\n    }\r\n    const reader: FileReader = new FileReader();\r\n\r\n    if (!thumbnail) {\r\n      return (this.showThumbnailModal = false);\r\n    }\r\n\r\n    // tslint:disable-next-line:no-unused-expression\r\n    new ImageCompressor(thumbnail, {\r\n      quality: 0.6,\r\n      success: (compressedFile: File) => {\r\n        reader.onload = (ev: any) => {\r\n          this.me\r\n            .uploadThumbnail(\r\n              event._id,\r\n              btoa(ev.target.result),\r\n              compressedFile.type\r\n            )\r\n            .subscribe((updatedEvent: any) => {\r\n              this.thumbnailInput.nativeElement.value = '';\r\n              this.showThumbnailModal = false;\r\n              this.event = updatedEvent;\r\n              this.ngOnInit();\r\n            });\r\n        };\r\n        reader.readAsBinaryString(compressedFile);\r\n      }\r\n    });\r\n  }\r\n\r\n  onShowThumbnailModal() {\r\n    if (this.event.status !== 'CANCELED') {\r\n      this.showThumbnailModal = true;\r\n    }\r\n  }\r\n\r\n  uploadFiles(ev) {\r\n    const filesData: FormData = this.getFilesToUpload();\r\n\r\n    this.me.postEventFiles(ev._id, filesData).subscribe(d => {\r\n      this.filesInput.nativeElement.value = '';\r\n      if (this.formKey === 'edit') {\r\n        this.me.getEventById(this.event._id).subscribe(event => {\r\n          this.event = event;\r\n          this.showFilesModal = false;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onDeleteFile(file) {\r\n    this.me.removeEventFile(this.event._id, file.name).subscribe(event => {\r\n      this.event = event;\r\n    });\r\n  }\r\n\r\n  getFilesToUpload() {\r\n    let filesToUpload: Array<File> = [];\r\n    const domFiles = this.filesInput.nativeElement.files;\r\n    const formData: FormData = new FormData();\r\n\r\n    filesToUpload = <Array<File>>domFiles;\r\n\r\n    for (let i = 0; i < domFiles.length; i++) {\r\n      formData.append('files', filesToUpload[i], filesToUpload[i]['name']);\r\n    }\r\n\r\n    return formData;\r\n  }\r\n\r\n  transformDate(event) {\r\n    const dateArr = event.date.split('-');\r\n    const year = dateArr[YEAR_POSITION];\r\n    const month = dateArr[MONTH_POSITION] - 1;\r\n    const day = dateArr[DAY_POSITION];\r\n    let hour = 12;\r\n    event.date = new Date(year, month, day, hour, 0, 0, 0);\r\n    if (event.shift === 'Diurno') {\r\n      hour = DAY_HOUR;\r\n    } else {\r\n      hour = NIGHT_HOUR;\r\n    }\r\n    event['time'] = new Date(year, month, day, hour, 0, 0, 0);\r\n  }\r\n\r\n  onCloseDeleteModal() {\r\n    this.isDeletingMode = false;\r\n  }\r\n\r\n  onEditAction(key) {\r\n    switch (key) {\r\n      case 'activate':\r\n        this.me.changeEventStatus(this.event, 'ACTIVE').subscribe(() => {\r\n          this.ngOnInit();\r\n        });\r\n        break;\r\n      case 'delete':\r\n        this.isDeletingMode = true;\r\n        break;\r\n      case 'deactivate':\r\n        this.me.changeEventStatus(this.event, 'DISABLED').subscribe(() => {\r\n          this.ngOnInit();\r\n        });\r\n        break;\r\n    }\r\n  }\r\n\r\n  onReturnFromDeletingMode() {\r\n    this.isDeletingMode = false;\r\n  }\r\n\r\n  onSubmitDeleteForm() {\r\n    const sendMessage = this.deleteForm.get('sendMessage').value;\r\n    const sendCustomMessage = this.deleteForm.get('sendCustomMessage').value;\r\n    const customMessage = this.deleteForm.get('customMessage').value;\r\n\r\n    if (!sendCustomMessage) {\r\n      this.me.cancelEvent(this.event, sendMessage, undefined).subscribe(() => {\r\n        this.ngOnInit();\r\n      });\r\n    }\r\n\r\n    if (sendCustomMessage && customMessage) {\r\n      this.me\r\n        .cancelEvent(this.event, sendMessage, customMessage)\r\n        .subscribe(() => {\r\n          this.ngOnInit();\r\n        });\r\n    }\r\n\r\n    this.isDeletingMode = false;\r\n  }\r\n\r\n  onScrollToFiles(el: ElementRef) {\r\n    this.filesSectionRef.nativeElement.scrollIntoView({ behavior: 'smooth' });\r\n  }\r\n}\r\n","module.exports = \".form-group {\\r\\n  width: 50%;\\r\\n  margin: 1rem auto;\\r\\n}\\r\\n\\r\\n.second-panel {\\r\\n  margin-top: 30px;\\r\\n}\\r\\n\\r\\n.observation-input {\\r\\n  width: 100%;\\r\\n  margin: 0;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvbWUvZXZlbnRzLXVzaGllci9ldmVudHMtdXNoaWVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFXO0VBQ1gsa0JBQWtCO0NBQ25COztBQUVEO0VBQ0UsaUJBQWlCO0NBQ2xCOztBQUVEO0VBQ0UsWUFBWTtFQUNaLFVBQVU7Q0FDWCIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL21lL2V2ZW50cy11c2hpZXIvZXZlbnRzLXVzaGllci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmZvcm0tZ3JvdXAge1xyXG4gIHdpZHRoOiA1MCU7XHJcbiAgbWFyZ2luOiAxcmVtIGF1dG87XHJcbn1cclxuXHJcbi5zZWNvbmQtcGFuZWwge1xyXG4gIG1hcmdpbi10b3A6IDMwcHg7XHJcbn1cclxuXHJcbi5vYnNlcnZhdGlvbi1pbnB1dCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWFyZ2luOiAwO1xyXG59XHJcbiJdfQ== */\"","module.exports = \"<ab-panel [schema]=\\\"{}\\\">\\r\\n  <panel-body>\\r\\n    <ab-tile [schema]=\\\"actionSchema\\\"></ab-tile>\\r\\n    <form [formGroup]=\\\"selectForm\\\">\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <label class=\\\"form-label\\\"\\r\\n               for=\\\"input-example-1\\\">Selecciona un evento para ver sus reservas</label>\\r\\n        <select class=\\\"form-select\\\"\\r\\n                formControlName=\\\"event\\\">\\r\\n          <option value=\\\"\\\"\\r\\n                  hidden>-- NINGUNO --</option>\\r\\n          <option *ngFor=\\\"let event of events\\\"\\r\\n                  [value]=\\\"event._id\\\">{{ event.name }} - {{ event.date | date }}</option>\\r\\n        </select>\\r\\n      </div>\\r\\n    </form>\\r\\n  </panel-body>\\r\\n</ab-panel>\\r\\n<div class=\\\"second-panel\\\">\\r\\n  <ab-panel [schema]=\\\"{}\\\"\\r\\n            *ngIf=\\\"bookings !== undefined\\\">\\r\\n    <panel-body>\\r\\n      <ab-editor [actionSchema]=\\\"{header: {title: editorTitle, subtitle: 'Lista de reservas do evento'}}\\\"\\r\\n                 [tableData]=\\\"bookings\\\"\\r\\n                 [cardSchema]=\\\"{}\\\"\\r\\n                 [reportSchema]=\\\"reportSchema\\\"\\r\\n                 (rowAction)=\\\"onRowAction($event)\\\"\\r\\n                 [cardSchema]=\\\"schema?.cardSchema\\\">\\r\\n      </ab-editor>\\r\\n    </panel-body>\\r\\n  </ab-panel>\\r\\n</div>\\r\\n<form [formGroup]=\\\"observationForm\\\"\\r\\n      (submit)=\\\"onAddComment()\\\">\\r\\n  <ab-modal [title]=\\\"'Observacins sobre ' + selectedBooking.owner.name\\\"\\r\\n            [active]=\\\"showCommentsModal\\\"\\r\\n            (close)=\\\"showCommentsModal = false\\\"\\r\\n            *ngIf=\\\"selectedBooking\\\">\\r\\n    <modal-content>\\r\\n      <div class=\\\"form-group observation-input\\\">\\r\\n        <label class=\\\"form-label\\\">Observacins</label>\\r\\n        <textarea class=\\\"form-input\\\"\\r\\n                  formControlName=\\\"observation\\\"\\r\\n                  placeholder=\\\"Observacins\\\"\\r\\n                  rows=\\\"3\\\"></textarea>\\r\\n      </div>\\r\\n    </modal-content>\\r\\n    <modal-footer>\\r\\n      <button type=\\\"submit\\\"\\r\\n              class=\\\"btn btn-primary\\\"\\r\\n              [disabled]=\\\"observationForm.invalid\\\">Gardar observacins</button>\\r\\n    </modal-footer>\\r\\n  </ab-modal>\\r\\n</form>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { BusService } from 'app/tools/bus.service';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { IWidgetSchema } from 'app/tools/schema.model';\r\nimport { SecurityService } from 'app/tools/security.service';\r\nimport { MeService } from 'app/views/me/me.service';\r\nimport { OrganizationService } from 'app/views/organization/organization.service';\r\nimport { Level } from '../../../tools/message.model';\r\n\r\nconst TWO_DAYS = 2;\r\n\r\n@Component({\r\n  selector: 'ab-events-ushier',\r\n  templateUrl: './events-ushier.component.html',\r\n  styleUrls: ['./events-ushier.component.css']\r\n})\r\nexport class EventsUshierComponent implements OnInit {\r\n\r\n  public selectedEventId: string;\r\n  public selectedBooking;\r\n  public selectForm: FormGroup;\r\n  public events: any[];\r\n  public bookings: any[];\r\n  public panelSchema: IWidgetSchema = {};\r\n  public actionSchema: IWidgetSchema;\r\n  public reportSchema: any;\r\n  public organization;\r\n  public editorTitle = '';\r\n  public showCommentsModal = false;\r\n  public observationForm: FormGroup;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private schema: SchemaService,\r\n    private orgService: OrganizationService,\r\n    private router: Router,\r\n    private me: MeService,\r\n    private security: SecurityService,\r\n    private bus: BusService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.getSchema();\r\n    this.createForm();\r\n  }\r\n\r\n  getSchema() {\r\n    this.schema\r\n      .getSchema$('me_events_ushier')\r\n      .subscribe(schemas => {\r\n        this.actionSchema = schemas.actions;\r\n        this.reportSchema = schemas.report;\r\n        this.getEvents();\r\n      });\r\n  }\r\n\r\n  createForm() {\r\n    this.selectForm = this.fb.group({\r\n      event: ['']\r\n    });\r\n    this.observationForm = this.fb.group({\r\n      observation: ['', Validators.required]\r\n    });\r\n    this.onChanges();\r\n  }\r\n\r\n  onChanges() {\r\n    this.selectForm.get('event').valueChanges.subscribe(\r\n      (eventId: string) => {\r\n        this.getBookings(eventId);\r\n        this.selectedEventId = eventId;\r\n        this.editorTitle = this.events.filter(event => event._id === eventId)[0].name;\r\n      }\r\n    )\r\n  }\r\n\r\n  getEvents() {\r\n    this.organization = this.security.getLocalOrganization();\r\n\r\n    const startDate = new Date();\r\n    const endingDate = new Date();\r\n\r\n    startDate.setDate(startDate.getDate() - TWO_DAYS);\r\n    endingDate.setDate(endingDate.getDate() + TWO_DAYS);\r\n\r\n    const payload = {\r\n      organizationId: this.organization._id,\r\n      status: 'active',\r\n      startDate: startDate.toISOString().split('T')[0],\r\n      endingDate: endingDate.toISOString().split('T')[0]\r\n    };\r\n\r\n    this.me.filterEvents(payload)\r\n      .subscribe((events: any) => {\r\n        this.events = events;\r\n      });\r\n  }\r\n\r\n  getBookings(eventId) {\r\n    this.me.getBookingsByEventIdAndNotStatus(eventId, 'CANCELED').subscribe(\r\n      (bookings: any) => {\r\n        this.bookings = bookings;\r\n      });\r\n  }\r\n\r\n  onRowAction(action) {\r\n    const status = action.key.toUpperCase();\r\n\r\n    if (action.key === 'comments') {\r\n      this.selectedBooking = action.value;\r\n      this.observation.setValue(this.selectedBooking.observation);\r\n      this.showCommentsModal = true;\r\n    } else {\r\n      this.me.changeBookingStatus(action.value, status).subscribe((booking: any) => {\r\n        this.getBookings(this.selectedEventId);\r\n      });\r\n    }\r\n  }\r\n\r\n  onAddComment() {\r\n    this.selectedBooking.observation = this.observation.value;\r\n    this.me.updateBooking(this.selectedBooking).subscribe(\r\n      (res: any) => {\r\n        this.bus.emit({ level: Level.SUCCESS, text: 'Observacins gardadas con xito', code: '' });\r\n        this.selectedBooking = res;\r\n        this.showCommentsModal = false;\r\n      }\r\n    )\r\n  }\r\n\r\n  get observation() {\r\n    return this.observationForm.get('observation');\r\n  }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL21lL2V2ZW50cy9ldmVudHMuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<ab-panel [schema]=\\\"panelSchema\\\">\\r\\n  <panel-body>\\r\\n    <ab-editor [actionSchema]=\\\"actionSchema\\\"\\r\\n               [tableData]=\\\"events\\\"\\r\\n               [reportSchema]=\\\"reportSchema\\\"\\r\\n               [createFormSchema]=\\\"\\\"\\r\\n               [cardSchema]=\\\"cardSchema\\\"\\r\\n               [filterSchema]=\\\"'events_filter'\\\"\\r\\n               (filter)=\\\"onFilter($event)\\\"\\r\\n               (rowAction)=\\\"onRowAction($event)\\\"\\r\\n               (delete)=\\\"onDelete($event)\\\">\\r\\n    </ab-editor>\\r\\n  </panel-body>\\r\\n</ab-panel>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { IWidgetSchema, IFormSchema, IReportSchema, IAction } from 'app/tools/schema.model';\r\nimport { BusService } from 'app/tools/bus.service';\r\nimport { MeService } from 'app/views/me/me.service';\r\nimport { SecurityService } from 'app/tools/security.service';\r\nimport { IUser } from 'app/tools/user.model';\r\nimport { IOrganization } from 'app/tools/organization.model';\r\nimport { Level } from 'app/tools/message.model';\r\nimport { Router } from '@angular/router';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'ab-events',\r\n  templateUrl: './events.component.html',\r\n  styleUrls: ['./events.component.css']\r\n})\r\nexport class EventsComponent implements OnInit {\r\n\r\n  private organization: IOrganization;\r\n  public selectedEvent;\r\n  public events: any[];\r\n  public filters;\r\n  public panelSchema: IWidgetSchema = {};\r\n  public actionSchema: IWidgetSchema;\r\n  public reportSchema: IReportSchema;\r\n  public cardSchema: IWidgetSchema;\r\n\r\n  constructor(private schema: SchemaService,\r\n    private me: MeService,\r\n    private router: Router,\r\n    private security: SecurityService,\r\n    private bus: BusService,\r\n    private fb: FormBuilder) { }\r\n\r\n  ngOnInit() {\r\n    this.getSchema();\r\n  }\r\n\r\n  getSchema() {\r\n    this.schema\r\n      .getSchema$('me_events')\r\n      .subscribe(schemas => {\r\n        this.actionSchema = schemas.actions;\r\n        this.reportSchema = schemas.report;\r\n        this.cardSchema = { header: { title: '' }, fields: this.reportSchema.fields };\r\n      });\r\n    this.getOrganization();\r\n  }\r\n\r\n  getOrganization() {\r\n    this.organization = this.security.getLocalOrganization();\r\n  }\r\n\r\n  onFilter(payload?) {\r\n    let params;\r\n\r\n    if (!payload) {\r\n      params = this.filters;\r\n    } else {\r\n      params = payload;\r\n      this.filters = payload;\r\n    }\r\n\r\n    this.me.filterEvents(params)\r\n      .pipe(\r\n        map((events: any) => {\r\n          if (events) {\r\n            events.map(event => {\r\n              event.free = event.capacity - event.pax;\r\n              event.time = `De ${event.startTime} a ${event.endTime}`;\r\n              return event;\r\n            })\r\n          }\r\n          return events\r\n        })\r\n      )\r\n      .subscribe((events: any[]) => {\r\n        this.events = events;\r\n      });\r\n  }\r\n\r\n  onRowAction(action) {\r\n    const event = Object.assign({}, action.value);\r\n\r\n    this.selectedEvent = event;\r\n\r\n    switch (action.key) {\r\n      case 'edit':\r\n        this.router.navigateByUrl(`me/events/${this.selectedEvent._id}`);\r\n        break;\r\n    }\r\n  }\r\n\r\n  onDelete(event) {\r\n    this.me.deleteEvent(event._id).subscribe(\r\n      () => {\r\n        this.onFilter();\r\n      }\r\n    )\r\n  }\r\n\r\n}\r\n","import { NgModule, NO_ERRORS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MeComponent } from './me/me.component';\r\nimport { ComponentsModule } from 'app/tools/components/components.module';\r\nimport { MeRoutingModule } from 'app/views/me/me.routing';\r\nimport { MeService } from 'app/views/me/me.service';\r\nimport { UsersComponent } from 'app/views/me/users/users.component';\r\nimport { OrganizationsComponent } from 'app/views/me/organizations/organizations.component';\r\nimport { OrganizationComponent } from './organization/organization.component';\r\nimport { EventsComponent } from './events/events.component';\r\nimport { EventBookingsComponent } from './event-bookings/event-bookings.component';\r\nimport { BookingsComponent } from './bookings/bookings.component';\r\nimport { EventComponent } from './event/event.component';\r\nimport { EventsUshierComponent } from './events-ushier/events-ushier.component';\r\nimport { OrganizationService } from 'app/views/organization/organization.service';\r\nimport { BookingComponent } from './booking/booking.component';\r\nimport { EventPrintComponent } from './event-print/event-print.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MeRoutingModule,\r\n    ComponentsModule\r\n  ],\r\n  // tslint:disable-next-line:max-line-length\r\n  declarations: [MeComponent, UsersComponent, OrganizationsComponent, OrganizationComponent, EventsComponent, EventBookingsComponent, BookingsComponent, EventComponent, EventsUshierComponent, BookingComponent, EventPrintComponent],\r\n  providers: [MeService, OrganizationService],\r\n  schemas: [NO_ERRORS_SCHEMA]\r\n})\r\nexport class MeModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { MeComponent } from 'app/views/me/me/me.component';\r\nimport { UsersComponent } from 'app/views/me/users/users.component';\r\nimport { OrganizationsComponent } from 'app/views/me/organizations/organizations.component';\r\nimport { OrganizationComponent } from 'app/views/me/organization/organization.component';\r\nimport { EventsComponent } from 'app/views/me/events/events.component';\r\nimport { EventBookingsComponent } from 'app/views/me/event-bookings/event-bookings.component';\r\nimport { BookingsComponent } from 'app/views/me/bookings/bookings.component';\r\nimport { EventComponent } from 'app/views/me/event/event.component';\r\nimport { EventsUshierComponent } from 'app/views/me/events-ushier/events-ushier.component';\r\nimport { BookingComponent } from 'app/views/me/booking/booking.component';\r\nimport { EventPrintComponent } from './event-print/event-print.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MeComponent,\r\n    data: { name: 'me', title: 'O meu perfil' }\r\n  },\r\n  {\r\n    path: 'confirm/:userId',\r\n    redirectTo: '/login/confirm/:userId',\r\n    data: { name: 'me_confirm', title: 'Confirmar' }\r\n  },\r\n  {\r\n    path: 'events',\r\n    component: EventsComponent,\r\n    data: { name: 'me_events', title: 'Ofertas' }\r\n  },\r\n  {\r\n    path: 'bookings',\r\n    component: BookingsComponent,\r\n    data: { name: 'me_bookings', title: 'Reservas' }\r\n  },\r\n  {\r\n    path: 'bookings/:bookingId',\r\n    component: BookingComponent,\r\n    data: { name: 'me_booking', title: 'Reserva' }\r\n  },\r\n  {\r\n    path: 'events/new',\r\n    component: EventComponent,\r\n    data: { name: 'me_events_new', title: 'Nova oferta' }\r\n  },\r\n  {\r\n    path: 'events/:id',\r\n    component: EventComponent,\r\n    data: { name: 'me_events_edit', title: 'Editar oferta' }\r\n  },\r\n  {\r\n    path: 'events/:id/print',\r\n    component: EventPrintComponent,\r\n    data: { name: 'me_event_bookings', title: 'Reservas' }\r\n  },\r\n  {\r\n    path: 'events/:slug/bookings',\r\n    component: EventBookingsComponent,\r\n    data: { name: 'me_event_bookings', title: 'Reservas' }\r\n  },\r\n  {\r\n    path: 'events-ushier',\r\n    component: EventsUshierComponent,\r\n    data: { name: 'me_events_ushier', title: 'Asistencia' }\r\n  },\r\n  {\r\n    path: 'organizations',\r\n    component: OrganizationsComponent,\r\n    data: { name: 'me_organizations', title: 'Centros' }\r\n  },\r\n  {\r\n    path: 'organization',\r\n    component: OrganizationComponent,\r\n    data: { name: 'me_organization', title: 'O meu centro' }\r\n  },\r\n  {\r\n    path: 'users',\r\n    component: UsersComponent,\r\n    data: { name: 'me_users', title: 'Usuarios' }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class MeRoutingModule { }\r\n","module.exports = \"<ab-dashboard [schemas]=\\\"widgetsSchema\\\"\\r\\n              (send)=\\\"onSend($event)\\\">\\r\\n</ab-dashboard>\\r\\n<aside *ngIf=\\\"schemas\\\">\\r\\n  <ab-modal [title]=\\\"user?.name\\\"\\r\\n            [active]=\\\"logOutActive\\\"\\r\\n            (close)=\\\"logOutActive=false\\\">\\r\\n    <modal-content>\\r\\n      <ab-card [data]=\\\"user\\\"\\r\\n               [schema]=\\\"schemas?.card\\\">\\r\\n      </ab-card>\\r\\n    </modal-content>\\r\\n    <modal-footer>\\r\\n      <ab-action [schema]=\\\"{label:'Quedar'}\\\"\\r\\n                 btnClass=\\\"btn-link\\\"\\r\\n                 (action)=\\\"logOutActive=false\\\"></ab-action>\\r\\n      <ab-action [schema]=\\\"{label:'Sar'}\\\"\\r\\n                 (action)=\\\"onLogOutClick()\\\"></ab-action>\\r\\n    </modal-footer>\\r\\n  </ab-modal>\\r\\n</aside>\\r\\n<aside>\\r\\n  <ab-modal [title]=\\\"schemas?.changePassword.title\\\"\\r\\n            [active]=\\\"changePasswordActive\\\"\\r\\n            (close)=\\\"changePasswordActive=false\\\">\\r\\n    <modal-content>\\r\\n      <ab-form [formSchema]=\\\"schemas?.changePassword\\\"\\r\\n               (send)=\\\"onChangePasswordClick($event)\\\">\\r\\n      </ab-form>\\r\\n    </modal-content>\\r\\n    <modal-footer>\\r\\n      <ab-action [schema]=\\\"{label:'Non cambiar'}\\\"\\r\\n                 btnClass=\\\"btn-link\\\"\\r\\n                 (action)=\\\"changePasswordActive=false\\\"></ab-action>\\r\\n    </modal-footer>\\r\\n  </ab-modal>\\r\\n</aside>\\r\\n<aside>\\r\\n  <ab-modal [title]=\\\"schemas?.editProfile.title\\\"\\r\\n            [active]=\\\"editProfileActive\\\"\\r\\n            (close)=\\\"editProfileActive=false\\\">\\r\\n    <modal-content>\\r\\n      <ab-form [formSchema]=\\\"editProfile\\\"\\r\\n               (send)=\\\"onEditProfileClick($event)\\\">\\r\\n      </ab-form>\\r\\n    </modal-content>\\r\\n    <modal-footer>\\r\\n      <ab-action [schema]=\\\"{label:'Non cambiar'}\\\"\\r\\n                 btnClass=\\\"btn-link\\\"\\r\\n                 (action)=\\\"editProfileActive=false\\\"></ab-action>\\r\\n    </modal-footer>\\r\\n  </ab-modal>\\r\\n</aside>\\r\\n\"","// tslint:disable:cyclomatic-complexity\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { BusService } from 'app/tools/bus.service';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { IOrganization } from 'app/tools/organization.model';\r\nimport { IWidgetSchema } from 'app/tools/schema.model';\r\nimport { SecurityService } from 'app/tools/security.service';\r\nimport { IUser } from 'app/tools/user.model';\r\nimport { MeService } from 'app/views/me/me.service';\r\n\r\n@Component({\r\n  selector: 'ab-me',\r\n  templateUrl: './me.component.html',\r\n  styles: []\r\n})\r\nexport class MeComponent implements OnInit {\r\n  public schemas;\r\n  public editProfile;\r\n  public widgetsSchema: IWidgetSchema[];\r\n\r\n  public user: IUser = null;\r\n  public logOutActive: Boolean;\r\n  public changePasswordActive: Boolean;\r\n  public editProfileActive: Boolean;\r\n\r\n  public organization: IOrganization = null;\r\n\r\n  constructor(\r\n    private security: SecurityService,\r\n    private me: MeService,\r\n    private bus: BusService,\r\n    private schema: SchemaService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.schema\r\n      .getSchema$('me')\r\n      .subscribe(schema => {\r\n        this.schemas = schema;\r\n        this.getMe();\r\n      });\r\n  }\r\n\r\n  getMe() {\r\n    this.security\r\n      .getMe()\r\n      .subscribe(user => {\r\n        if (user) {\r\n          this.user = user;\r\n          this.editProfile = this.schemas.editProfile;\r\n          this.schema.populateDefaultValues(this.editProfile, this.user);\r\n          this.widgetsSchema = [];\r\n          const userSchema = this.schemas.userSchema;\r\n          const userRole = this.user.roles[0].toString().toLowerCase();\r\n          userSchema.header.title = this.user.name + ' - ' + userRole.toUpperCase();\r\n          userSchema.header.subtitle = this.user.email;\r\n          this.widgetsSchema.push(userSchema);\r\n          const roleSchema = this.schemas[userRole];\r\n          this.configureRoleSchemas(userRole, roleSchema);\r\n          this.widgetsSchema = this.widgetsSchema.concat(roleSchema);\r\n        } else {\r\n          this.security.logOutUser();\r\n        }\r\n      });\r\n  }\r\n\r\n  configureRoleSchemas(userRole, roleSchema) {\r\n    if (userRole === 'god') {\r\n      this.me.getOrganizationsCount()\r\n        .subscribe(count => roleSchema[0].header.counter = count);\r\n      this.me.getUsersCount()\r\n        .subscribe(count => roleSchema[1].header.counter = count);\r\n    } else if (userRole === 'admin') {\r\n      this.me.getAdministratedOrganization(this.user.organizationId)\r\n        .subscribe(organization => {\r\n          this.organization = organization;\r\n          if (this.organization) {\r\n            roleSchema[0].header.title = this.organization.name;\r\n            roleSchema[0].header.subtitle = this.organization.slogan;\r\n          }\r\n        });\r\n      this.me.getUsersCount()\r\n        .subscribe(count => roleSchema[1].header.counter = count);\r\n    } else if (userRole === 'mestre') {\r\n\r\n    } else if (userRole === 'conserje') {\r\n\r\n    } else if (userRole === 'interno') {\r\n\r\n    } else {\r\n      this.security.logOutUser();\r\n    }\r\n  }\r\n\r\n  onSend(event) {\r\n    if (event.key === 'logout') {\r\n      this.logOutActive = true;\r\n    } else if (event.key === 'change_password') {\r\n      this.changePasswordActive = true;\r\n    } else if (event.key === 'edit_profile') {\r\n      this.editProfileActive = true;\r\n    } else if (event.key === 'delete') {\r\n      this.deleteUser();\r\n    }\r\n  }\r\n\r\n  onLogOutClick() {\r\n    this.logOutActive = false;\r\n    this.security.logOutUser();\r\n  }\r\n\r\n  onChangePasswordClick(changePasswordClaim) {\r\n    this.me.changePassword(changePasswordClaim).subscribe();\r\n    this.changePasswordActive = false;\r\n  }\r\n\r\n  onEditProfileClick(editProfileClaim) {\r\n    this.me.editProfile(editProfileClaim).subscribe(r => this.security.getMe().subscribe(() => this.security.navigateTo(['/'])));\r\n    this.editProfileActive = false;\r\n  }\r\n\r\n  deleteUser() {\r\n    this.me.deleteUser().subscribe(\r\n      () => {\r\n        this.security.logOutUser();\r\n      }\r\n    )\r\n  }\r\n\r\n}\r\n","module.exports = \".second {\\r\\n  margin-top: 30px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvbWUvb3JnYW5pemF0aW9uL29yZ2FuaXphdGlvbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsaUJBQWlCO0NBQ2xCIiwiZmlsZSI6InNyYy9hcHAvdmlld3MvbWUvb3JnYW5pemF0aW9uL29yZ2FuaXphdGlvbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNlY29uZCB7XHJcbiAgbWFyZ2luLXRvcDogMzBweDtcclxufVxyXG4iXX0= */\"","module.exports = \"<section *ngIf=\\\"loadedMetadata;else loading\\\">\\r\\n  <ab-panel [schema]=\\\"schemas\\\">\\r\\n    <panel-body>\\r\\n      <ab-form [formSchema]=\\\"schemas.form\\\"\\r\\n               (send)=\\\"onSend($event)\\\">\\r\\n      </ab-form>\\r\\n    </panel-body>\\r\\n  </ab-panel>\\r\\n</section>\\r\\n<ng-template #loading>\\r\\n  <ab-load-empty-state [schema]=\\\"loadingPanelSchema\\\">\\r\\n  </ab-load-empty-state>\\r\\n</ng-template>\\r\\n\"","import { Component, OnInit, ViewChild, AfterViewInit } from '@angular/core';\r\nimport { MeService } from 'app/views/me/me.service';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { BusService } from 'app/tools/bus.service';\r\nimport { IFormSchema, IWidgetSchema, IAction } from 'app/tools/schema.model';\r\n\r\n\r\n@Component({\r\n  selector: 'ab-organization',\r\n  templateUrl: './organization.component.html',\r\n  styleUrls: ['./organization.component.css']\r\n})\r\nexport class OrganizationComponent implements OnInit {\r\n\r\n  @ViewChild('filesInput') filesInput;\r\n\r\n  public tileSchema;\r\n  public schemas;\r\n  public user;\r\n  public formSchema: IFormSchema;\r\n  loadedMetadata = false;\r\n  loadingPanelSchema = {\r\n    loading: true,\r\n    empty: false\r\n  };\r\n  public showModal = false;\r\n  public organization: any;\r\n  public fileConfirmButton: IAction = {\r\n    label: 'Subir',\r\n    key: 'upload',\r\n    disabled: false\r\n  }\r\n\r\n  constructor(\r\n    private bus: BusService,\r\n    private me: MeService,\r\n    private schema: SchemaService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.schema\r\n      .getSchema$('me_organization')\r\n      .subscribe(schemas => {\r\n        this.schemas = schemas;\r\n        this.tileSchema = schemas['tile'];\r\n        this.formSchema = schemas.form;\r\n        this.bus\r\n          .getUser$()\r\n          .subscribe(user => {\r\n            this.user = user;\r\n            if (user && user.organizationId) {\r\n              this.me\r\n                .getAdministratedOrganization(user.organizationId)\r\n                .subscribe((organization: any) => {\r\n                  if (organization.banner) {\r\n                    this.schemas.tile.actions[0].disabled = true;\r\n                  }\r\n                  this.schemas.header.title = organization.name;\r\n                  this.organization = organization;\r\n                  this.schema.populateDefaultValues(this.formSchema, this.organization);\r\n                  this.loadedMetadata = true;\r\n                });\r\n            }\r\n          });\r\n      });\r\n  }\r\n\r\n  onSend(editedOrganization) {\r\n    this.loadedMetadata = false;\r\n    editedOrganization._id = this.organization._id;\r\n    this.me\r\n      .updateOrganization(editedOrganization)\r\n      .subscribe(savedOrganization => {\r\n        this.organization = savedOrganization;\r\n        this.schema.populateDefaultValues(this.formSchema, this.organization);\r\n        this.loadedMetadata = true;\r\n      });\r\n  }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL21lL29yZ2FuaXphdGlvbnMvb3JnYW5pemF0aW9ucy5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<ab-panel [schema]=\\\"panelSchema\\\">\\r\\n  <panel-body>\\r\\n    <ab-editor [actionSchema]=\\\"actionSchema\\\"\\r\\n               [tableData]=\\\"organizations\\\"\\r\\n               [reportSchema]=\\\"reportSchema\\\"\\r\\n               (rowAction)=\\\"onRowAction($event)\\\"\\r\\n               [createFormSchema]=\\\"createFormSchema\\\"\\r\\n               [cardSchema]=\\\"cardSchema\\\"\\r\\n               (create)=\\\"onCreate($event)\\\"\\r\\n               (delete)=\\\"onDelete($event)\\\">\\r\\n    </ab-editor>\\r\\n    <aside *ngIf=\\\"setAdminFormSchema\\\">\\r\\n      <ab-modal [title]=\\\"setAdminFormSchema.title\\\"\\r\\n                [active]=\\\"activeSetAdminModal\\\"\\r\\n                (close)=\\\"onCloseSetAdminModal(null)\\\">\\r\\n        <modal-content>\\r\\n          <ab-form [formSchema]=\\\"setAdminFormSchema\\\"\\r\\n                   (send)=\\\"onCloseSetAdminModal($event)\\\">\\r\\n          </ab-form>\\r\\n        </modal-content>\\r\\n      </ab-modal>\\r\\n    </aside>\\r\\n  </panel-body>\\r\\n</ab-panel>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { IOrganizationAdmin } from 'app/views/me/organization-admin.model';\r\nimport { Observable } from 'rxjs';\r\nimport { BusService } from 'app/tools/bus.service';\r\nimport { Level } from 'app/tools/message.model';\r\nimport { IFormSchema, IWidgetSchema, IReportSchema, ILoadEmptyStateSchema, IKeyValue } from 'app/tools/schema.model';\r\nimport { MeService } from 'app/views/me/me.service';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { tap } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'ab-organizations',\r\n  templateUrl: './organizations.component.html',\r\n  styleUrls: ['./organizations.component.css']\r\n})\r\nexport class OrganizationsComponent implements OnInit {\r\n  public organizations: any[];\r\n  public activeSetAdminModal = false;\r\n  public activeCreateOrganizationModal = false;\r\n  public activeDeleteOrganizationModal = false;\r\n  public activeOrganization;\r\n  public createFormSchema: IFormSchema;\r\n  public actionSchema: IWidgetSchema;\r\n  public reportSchema: IReportSchema;\r\n  public setAdminFormSchema: IFormSchema;\r\n  public cardSchema: IWidgetSchema;\r\n  public panelSchema: IWidgetSchema = {};\r\n\r\n  public name = 'organizations';\r\n  constructor(\r\n    private me: MeService,\r\n    private bus: BusService,\r\n    private schema: SchemaService) { }\r\n\r\n  ngOnInit() {\r\n    this.schema\r\n      .getSchema$('me_organizations')\r\n      .subscribe(schemas => {\r\n        this.actionSchema = schemas.actions;\r\n        this.createFormSchema = schemas.create;\r\n        this.reportSchema = schemas.report;\r\n        this.setAdminFormSchema = schemas.setAdmin;\r\n        this.cardSchema = { header: { title: '' }, fields: this.createFormSchema.controls };\r\n        this.getOrganizations();\r\n      }\r\n      );\r\n  }\r\n\r\n  getOrganizations() {\r\n    this.me\r\n      .getOrganizations()\r\n      .pipe(\r\n        tap(data => this.organizations = data)\r\n      ).subscribe(this.getOrganizationsAdmins.bind(this));\r\n  }\r\n\r\n  getOrganizationsAdmins() {\r\n    this.organizations.forEach(this.getOrganizationAdmin.bind(this));\r\n  }\r\n\r\n  getOrganizationAdmin(organization) {\r\n    this.me\r\n      .getOrganizationAdmin(organization._id)\r\n      .subscribe(users => organization.admin = users ? users[0] : null);\r\n  }\r\n\r\n  onSetAdmin(organization) {\r\n    this.activeOrganization = organization;\r\n    this.activeSetAdminModal = true;\r\n  }\r\n\r\n  onCloseSetAdminModal(newAdmin) {\r\n    if (newAdmin) {\r\n      this.setOrganizationAdmin(newAdmin);\r\n    }\r\n    this.activeOrganization = null;\r\n    this.activeSetAdminModal = false;\r\n  }\r\n\r\n  onRowAction(data: IKeyValue) {\r\n    if (data.key === 'setAdmin') {\r\n      this.onSetAdmin(data.value);\r\n    }\r\n  }\r\n\r\n  setOrganizationAdmin(newAdmin) {\r\n    newAdmin.organizationId = this.activeOrganization._id;\r\n    this.me\r\n      .setOrganizationAdmin(newAdmin)\r\n      .subscribe(res => {\r\n        this.bus.emit({ level: Level.SUCCESS, text: newAdmin.name + ' asignado!!', code: '' });\r\n        this.getOrganizations();\r\n      });\r\n  }\r\n\r\n  onCreate(newOrganization) {\r\n    this.activeCreateOrganizationModal = false;\r\n    if (newOrganization) {\r\n      this.me\r\n        .postOrganization(newOrganization)\r\n        .subscribe(res => {\r\n          this.bus.emit({ level: Level.SUCCESS, text: newOrganization.name + ' creado!!', code: '' });\r\n          this.getOrganizations();\r\n        });\r\n    }\r\n  }\r\n\r\n\r\n  onDelete(oldOrganization) {\r\n    this.activeDeleteOrganizationModal = false;\r\n    this.me\r\n      .deleteOrganization(oldOrganization)\r\n      .subscribe(res => {\r\n        this.bus.emit({ level: Level.SUCCESS, text: oldOrganization.name + ' borrado!!', code: '' });\r\n        this.getOrganizations();\r\n      });\r\n  }\r\n}\r\n\r\n","module.exports = \"\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL21lL3VzZXJzL3VzZXJzLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<ab-panel [schema]=\\\"panelSchema\\\">\\r\\n  <panel-body>\\r\\n    <ab-editor [actionSchema]=\\\"actionSchema\\\"\\r\\n               [tableData]=\\\"users\\\"\\r\\n               [reportSchema]=\\\"reportSchema\\\"\\r\\n               (rowAction)=\\\"onRowAction($event)\\\"\\r\\n               [createFormSchema]=\\\"createFormSchema\\\"\\r\\n               [cardSchema]=\\\"cardSchema\\\"\\r\\n               [filterSchema]=\\\"'users_filter'\\\"\\r\\n               (filter)=\\\"onFilter($event)\\\"\\r\\n               (create)=\\\"onCreate($event)\\\"\\r\\n               (delete)=\\\"onDelete($event)\\\">\\r\\n    </ab-editor>\\r\\n  </panel-body>\\r\\n</ab-panel>\\r\\n\"","import { MeService } from '../me.service';\r\nimport { BusService } from '../../../tools/bus.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { IWidgetSchema, IReportSchema, IFormSchema } from 'app/tools/schema.model';\r\nimport { SchemaService } from 'app/tools/components/schema.service';\r\nimport { Level } from 'app/tools/message.model';\r\n\r\n@Component({\r\n  selector: 'ab-users',\r\n  templateUrl: './users.component.html',\r\n  styleUrls: ['./users.component.css']\r\n})\r\nexport class UsersComponent implements OnInit {\r\n\r\n  panelSchema: IWidgetSchema = {};\r\n  actionSchema: IWidgetSchema;\r\n  reportSchema: IReportSchema;\r\n  createFormSchema: IFormSchema;\r\n  public cardSchema: IWidgetSchema;\r\n  users: any[];\r\n\r\n  constructor(private bus: BusService, private me: MeService, private schema: SchemaService) { }\r\n\r\n  ngOnInit() {\r\n    this.schema\r\n      .getSchema$('me_users')\r\n      .subscribe(schemas => {\r\n        this.actionSchema = schemas.actions;\r\n        this.createFormSchema = schemas.create;\r\n        this.reportSchema = schemas.report;\r\n        this.cardSchema = { header: { title: '' }, fields: this.createFormSchema.controls };\r\n        this.filterUsers();\r\n      });\r\n  }\r\n\r\n  filterUsers(name?: string, status?: string) {\r\n    this.me\r\n      .getUsers(name, status)\r\n      .subscribe(users => this.users = users);\r\n  }\r\n\r\n  onFilter(payload) {\r\n    this.filterUsers(payload.name, payload.status);\r\n  }\r\n\r\n  onCreate(data) {\r\n    this.me.inviteUser(data).subscribe(r => this.filterUsers());\r\n  }\r\n\r\n  onDelete(data) {\r\n    this.me.removeUserDefinitively(data._id).subscribe(r => {\r\n      this.bus.emit({ level: Level.SUCCESS, text: 'Usuario eliminado con xito', code: '' });\r\n      this.filterUsers();\r\n    });\r\n  }\r\n\r\n  onRowAction(data) {\r\n    switch (data.key) {\r\n      case 'aprobe':\r\n        this.me.approbeUser(data.value).subscribe(r => this.filterUsers());\r\n        this.bus.emit({ level: Level.SUCCESS, text: 'Usuario aprobado con xito', code: '' });\r\n        break;\r\n      case 'disable':\r\n        this.me.disableUser(data.value).subscribe(r => this.filterUsers());\r\n        this.bus.emit({ level: Level.SUCCESS, text: 'Usuario deshabilitado con xito', code: '' });\r\n        break;\r\n      case 'resend':\r\n        this.me.reInviteUser(data.value).subscribe(r => {\r\n          this.bus.emit({ level: Level.SUCCESS, text: 'Invitacin reenviada con xito', code: '' });\r\n        });\r\n        break;\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}